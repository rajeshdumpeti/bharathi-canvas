"use strict";(self.webpackChunkmy_app_=self.webpackChunkmy_app_||[]).push([[498],{4024:(e,s,a)=>{a.d(s,{A:()=>r});var l=a(5043),t=a(579);const r=e=>{let{value:s,onChange:a,placeholder:r="Add and press Enter",className:n="",dedupe:i=!0}=e;const[c,d]=(0,l.useState)(""),o=(0,l.useRef)(null),m=e=>{const l=e.split(/[,;]/g).map(e=>e.trim()).filter(Boolean);if(!l.length)return;const t=new Set(s),r=i?[...new Set([...s,...l])]:[...s,...l];(r.length!==s.length||l.some(e=>!t.has(e)))&&a(r),d("")};return(0,t.jsxs)("div",{className:["flex flex-wrap gap-2 rounded border bg-white px-2 py-2",n].join(" "),onClick:()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.focus()},children:[s.map((e,l)=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-800",children:[e,(0,t.jsx)("button",{type:"button","aria-label":"Remove ".concat(e),className:"rounded p-0.5 hover:bg-gray-200",onClick:()=>(e=>{var l;const t=s.filter((s,a)=>a!==e);a(t),null===(l=o.current)||void 0===l||l.focus()})(l),children:"\u2715"})]},"".concat(e,"-").concat(l))),(0,t.jsx)("input",{ref:o,value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),m(c)):"Backspace"===e.key&&!c&&s.length?a(s.slice(0,-1)):","!==e.key&&";"!==e.key||(e.preventDefault(),m(c))},onBlur:()=>(e=>{const l=e.trim();if(!l)return;const t=i?Array.from(new Set([...s,l])):[...s,l];a(t),d("")})(c),placeholder:s.length?"":r,className:"min-w-[8ch] flex-1 outline-none text-sm placeholder:text-gray-400 bg-transparent"})]})}},5107:(e,s,a)=>{a.d(s,{A:()=>t});a(5043);var l=a(579);const t=e=>{let{children:s,onClick:a,type:t="button",className:r="",title:n,disabled:i}=e;return(0,l.jsx)("button",{type:t,title:n,disabled:i,onClick:a,className:["inline-flex items-center gap-1 rounded border px-3 py-1.5 text-sm","bg-white hover:bg-gray-50 text-gray-700","disabled:opacity-60 disabled:cursor-not-allowed",r].join(" "),children:s})}},5498:(e,s,a)=>{a.r(s),a.d(s,{default:()=>X});var l=a(5043),t=a(7002),r=a(579);const n=e=>{let{sections:s,activeKey:a,onSelect:n,onConfirmDelete:i}=e;const{projects:c,selected:d,setSelectedId:o,addProject:m}=(0,t.A)(),[h,x]=(0,l.useState)("");return(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Projects"}),(0,r.jsxs)("ul",{className:"space-y-2 mb-4 overflow-y-auto pr-1",children:[c.map(e=>(0,r.jsxs)("li",{className:"flex items-center justify-between p-2 rounded-lg cursor-pointer transition ".concat((null===d||void 0===d?void 0:d.id)===e.id?"bg-blue-600 text-white":"hover:bg-gray-800"),children:[(0,r.jsx)("span",{onClick:()=>o(e.id),className:"flex-1 pr-2",children:e.name}),c.length>0&&(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),null===i||void 0===i||i(e)},className:"p-1 rounded text-gray-400 hover:text-red-500",title:"Remove from Project Hub",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id)),0===c.length&&(0,r.jsx)("li",{className:"text-sm text-gray-400",children:"No projects yet."})]}),(0,r.jsxs)("div",{className:"mb-6 space-y-2",children:[(0,r.jsx)("input",{value:h,onChange:e=>x(e.target.value),placeholder:"New project name",className:"w-full p-2 rounded-lg bg-gray-800 text-white placeholder-gray-400 focus:outline-none"}),(0,r.jsx)("button",{onClick:()=>{const e=h.trim();e&&(m(e),x(""))},className:"w-full py-2 rounded-lg font-semibold transition\n            ".concat(h.trim()?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-600 text-gray-300 cursor-not-allowed"),children:"Add Project"})]}),(0,r.jsxs)("div",{className:"mt-auto",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Sections"}),(0,r.jsx)("ul",{className:"space-y-1 max-h-64 overflow-y-auto pr-1",children:s.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("button",{onClick:()=>null===n||void 0===n?void 0:n(e.key),disabled:!d,className:"w-full text-left px-2 py-1 rounded ".concat(a===e.key?"bg-gray-700":"hover:bg-gray-800"," ").concat(d?"":"opacity-50 cursor-not-allowed"),children:e.title})},e.key))}),!d&&(0,r.jsx)("p",{className:"mt-3 text-xs text-gray-400",children:"Create/select a project to enable sections."})]})]})};var i=a(9930),c=a(7893),d=a(3986),o=a(9379),m=a(5107),h=a(4024),x=a(9453);const p={summary:"",repoUrl:"",issueTrackerUrl:"",designDocUrl:"",license:"MIT",packageManager:"npm",nodeVersion:"",framework:"",branchStrategy:"trunk",techStack:["React","TailwindCSS","FastAPI"],commands:{install:"npm install",start:"npm start",build:"npm run build",test:"npm test",lint:"npm run lint",format:"npm run format"},environments:[{name:"Dev",appUrl:"",apiUrl:""},{name:"Staging",appUrl:"",apiUrl:""},{name:"Prod",appUrl:"",apiUrl:""}],envVars:[],tooling:{lint:"ESLint",format:"Prettier",typecheck:"TypeScript (optional)"},contacts:[]};function u(e,s,a){return e.map((e,l)=>l!==s?e:"function"===typeof a?a(e):(0,o.A)((0,o.A)({},e),a))}function b(e,s){return e.filter((e,a)=>a!==s)}const g=["label","value","onChange","className"];function j(){const{selected:e,updateSection:s}=(0,t.A)(),a=(0,l.useMemo)(()=>{var s;return null!==e&&void 0!==e&&null!==(s=e.sections)&&void 0!==s&&s.setup&&"object"===typeof e.sections.setup?e.sections.setup:p},[e]),[n,i]=(0,l.useState)("read"),[c,d]=(0,l.useState)(p);(0,l.useEffect)(()=>{d(a||p),i("read")},[a,null===e||void 0===e?void 0:e.id]);const g=e=>d(s=>(0,o.A)((0,o.A)({},s),e));if(!e)return(0,r.jsxs)("div",{className:"rounded-lg border bg-white p-8 text-gray-600",children:["Create or select a project on the left to configure ",(0,r.jsx)("strong",{children:"Setup"}),"."]});var j,A,S,R,P,U,D;if("read"===n)return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Setup"}),(0,r.jsx)(m.A,{onClick:()=>i("edit"),children:"Edit"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsx)(y,{title:"Basics",children:(0,r.jsx)(v,{rows:[["Repository",f(c.repoUrl)],["Issue tracker",f(c.issueTrackerUrl)],["Design doc",f(c.designDocUrl)],["License",k(c.license)],["Package manager",k(c.packageManager)],["Node",k(c.nodeVersion)],["Framework",k(c.framework)],["Branching",k(c.branchStrategy)]]})}),(0,r.jsx)(y,{title:"Tech stack",children:null!==(j=c.techStack)&&void 0!==j&&j.length?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:c.techStack.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded bg-gray-100 text-xs",children:e},e))}):(0,r.jsx)(N,{})}),(0,r.jsx)(y,{title:"Commands",children:c.commands?(0,r.jsx)("pre",{className:"bg-gray-50 rounded p-3 text-xs overflow-auto",children:JSON.stringify(c.commands,null,2)}):(0,r.jsx)(N,{})}),(0,r.jsx)(y,{title:"Tooling",children:(0,r.jsx)(v,{rows:[["Lint",k(null===(A=c.tooling)||void 0===A?void 0:A.lint)],["Format",k(null===(S=c.tooling)||void 0===S?void 0:S.format)],["Typecheck",k(null===(R=c.tooling)||void 0===R?void 0:R.typecheck)]]})}),(0,r.jsx)(y,{className:"lg:col-span-2",title:"Environments",children:null!==(P=c.environments)&&void 0!==P&&P.length?(0,r.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:c.environments.map((e,s)=>(0,r.jsxs)("div",{className:"rounded border p-3 text-sm",children:[(0,r.jsx)("div",{className:"font-semibold mb-1",children:e.name||"Env ".concat(s+1)}),(0,r.jsx)("div",{className:"text-gray-500",children:"App:"}),(0,r.jsx)("div",{className:"break-all",children:f(e.appUrl)}),(0,r.jsx)("div",{className:"text-gray-500 mt-1",children:"API:"}),(0,r.jsx)("div",{className:"break-all",children:f(e.apiUrl)})]},s))}):(0,r.jsx)(N,{})}),(0,r.jsx)(y,{className:"lg:col-span-2",title:"Environment variables",children:null!==(U=c.envVars)&&void 0!==U&&U.length?(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,r.jsx)("th",{className:"py-2 pr-3",children:"Key"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Value"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Secret"}),(0,r.jsx)("th",{className:"py-2",children:"Description"})]})}),(0,r.jsx)("tbody",{children:c.envVars.map((e,s)=>(0,r.jsxs)("tr",{className:"border-t",children:[(0,r.jsx)("td",{className:"py-2 pr-3 font-mono",children:e.key||"\u2014"}),(0,r.jsx)("td",{className:"py-2 pr-3",children:e.secret?(0,r.jsx)(x.A,{children:e.value}):(0,r.jsx)("span",{className:"font-mono",children:e.value||"\u2014"})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:e.secret?"Yes":"No"}),(0,r.jsx)("td",{className:"py-2",children:e.description||"\u2014"})]},s))})]})}):(0,r.jsx)(N,{})}),(0,r.jsx)(y,{className:"lg:col-span-2",title:"Contacts",children:null!==(D=c.contacts)&&void 0!==D&&D.length?(0,r.jsx)("ul",{className:"text-sm space-y-2",children:c.contacts.map((e,s)=>(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.role||"Contact"})," ",e.name?"\u2014 ".concat(e.name):""," ",e.email?(0,r.jsx)("a",{className:"text-blue-700 hover:underline",href:"mailto:".concat(e.email),children:e.email}):""]},s))}):(0,r.jsx)(N,{})})]})]});return(0,r.jsxs)("form",{className:"space-y-6",onSubmit:e=>{e.preventDefault(),s("setup",c),i("read")},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Edit Setup"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(m.A,{onClick:()=>i("read"),children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save"})]})]}),(0,r.jsx)(y,{title:"Basics",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(C,{label:"Repository URL",value:c.repoUrl,onChange:e=>g({repoUrl:e}),placeholder:"https://github.com/you/repo"}),(0,r.jsx)(C,{label:"Issue tracker URL",value:c.issueTrackerUrl,onChange:e=>g({issueTrackerUrl:e}),placeholder:"https://github.com/you/repo/issues"}),(0,r.jsx)(C,{label:"Design doc URL",value:c.designDocUrl,onChange:e=>g({designDocUrl:e}),placeholder:"https://docs.google.com/\u2026"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(C,{label:"License",value:c.license,onChange:e=>g({license:e})}),(0,r.jsx)(w,{label:"Package manager",value:c.packageManager,onChange:e=>g({packageManager:e}),options:["npm","yarn","pnpm","bun"]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsx)(C,{label:"Node version",value:c.nodeVersion,onChange:e=>g({nodeVersion:e}),placeholder:"e.g. 20.x"}),(0,r.jsx)(C,{label:"Framework",value:c.framework,onChange:e=>g({framework:e}),placeholder:"e.g. React + Vite"})]}),(0,r.jsx)(w,{label:"Branch strategy",value:c.branchStrategy,onChange:e=>g({branchStrategy:e}),options:[{label:"Trunk-based",value:"trunk"},{label:"GitFlow",value:"gitflow"},{label:"None",value:"none"}]})]})}),(0,r.jsx)(y,{title:"Tech stack",children:(0,r.jsx)(h.A,{value:c.techStack,onChange:e=>g({techStack:e}),placeholder:"Add a technology and press Enter"})}),(0,r.jsx)(y,{title:"Commands",children:(0,r.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:Object.entries(c.commands).map(e=>{let[s,a]=e;return(0,r.jsx)(C,{label:s,value:a,onChange:e=>g({commands:(0,o.A)((0,o.A)({},c.commands),{},{[s]:e})}),className:"font-mono"},s)})})}),(0,r.jsxs)(y,{title:"Environments",children:[(0,r.jsx)("div",{className:"grid md:grid-cols-3 gap-4",children:c.environments.map((e,s)=>(0,r.jsxs)("div",{className:"rounded border p-3 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("input",{value:e.name,onChange:e=>g({environments:u(c.environments,s,{name:e.target.value})}),placeholder:"Env ".concat(s+1," name"),className:"w-40 rounded border px-2 py-1"}),(0,r.jsx)(m.A,{variant:"ghost",onClick:()=>g({environments:b(c.environments,s)}),children:"Remove"})]}),(0,r.jsx)(C,{label:"App URL",value:e.appUrl,onChange:e=>g({environments:u(c.environments,s,{appUrl:e})})}),(0,r.jsx)(C,{label:"API URL",value:e.apiUrl,onChange:e=>g({environments:u(c.environments,s,{apiUrl:e})})})]},s))}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(m.A,{variant:"neutral",onClick:()=>g({environments:[...c.environments,{name:"",appUrl:"",apiUrl:""}]}),children:"Add environment"})})]}),(0,r.jsxs)(y,{title:"Environment variables",children:[(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,r.jsx)("th",{className:"py-2 pr-3",children:"Key"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Value"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Secret"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Description"}),(0,r.jsx)("th",{className:"py-2"})]})}),(0,r.jsx)("tbody",{children:c.envVars.map((e,s)=>(0,r.jsxs)("tr",{className:"border-t",children:[(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{value:e.key,onChange:e=>g({envVars:u(c.envVars,s,{key:e.target.value})}),className:"w-full rounded border px-2 py-1 font-mono"})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{value:e.value,onChange:e=>g({envVars:u(c.envVars,s,{value:e.target.value})}),className:"w-full rounded border px-2 py-1 font-mono"})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsxs)("select",{value:e.secret?"yes":"no",onChange:e=>g({envVars:u(c.envVars,s,{secret:"yes"===e.target.value})}),className:"rounded border px-2 py-1",children:[(0,r.jsx)("option",{value:"no",children:"No"}),(0,r.jsx)("option",{value:"yes",children:"Yes"})]})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{value:e.description,onChange:e=>g({envVars:u(c.envVars,s,{description:e.target.value})}),className:"w-full rounded border px-2 py-1"})}),(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)(m.A,{variant:"ghost",onClick:()=>g({envVars:b(c.envVars,s)}),children:"Remove"})})]},s))})]})}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(m.A,{variant:"neutral",onClick:()=>g({envVars:[...c.envVars,{key:"",value:"",secret:!1,description:""}]}),children:"Add variable"})})]}),(0,r.jsx)(y,{title:"Tooling",children:(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,r.jsx)(C,{label:"Lint",value:c.tooling.lint,onChange:e=>g({tooling:(0,o.A)((0,o.A)({},c.tooling),{},{lint:e})})}),(0,r.jsx)(C,{label:"Format",value:c.tooling.format,onChange:e=>g({tooling:(0,o.A)((0,o.A)({},c.tooling),{},{format:e})})}),(0,r.jsx)(C,{label:"Typecheck",value:c.tooling.typecheck,onChange:e=>g({tooling:(0,o.A)((0,o.A)({},c.tooling),{},{typecheck:e})})})]})}),(0,r.jsxs)(y,{title:"Contacts",children:[(0,r.jsx)("div",{className:"space-y-3",children:c.contacts.map((e,s)=>(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-3 items-start",children:[(0,r.jsx)(C,{label:"Role",value:e.role,onChange:e=>g({contacts:u(c.contacts,s,{role:e})}),placeholder:"Owner"}),(0,r.jsx)(C,{label:"Name",value:e.name,onChange:e=>g({contacts:u(c.contacts,s,{name:e})})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(C,{label:"Email",value:e.email,onChange:e=>g({contacts:u(c.contacts,s,{email:e})}),placeholder:"email@domain.com",className:"flex-1"}),(0,r.jsx)(m.A,{variant:"ghost",onClick:()=>g({contacts:b(c.contacts,s)}),children:"Remove"})]})]},s))}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(m.A,{variant:"neutral",onClick:()=>g({contacts:[...c.contacts,{role:"",name:"",email:""}]}),children:"Add contact"})})]})]})}function y(e){let{title:s,children:a,className:l}=e;return(0,r.jsxs)("section",{className:"rounded border bg-white p-4 ".concat(l||""),children:[s?(0,r.jsx)("h4",{className:"font-semibold mb-3",children:s}):null,a]})}function v(e){let{rows:s=[]}=e;return(0,r.jsx)("dl",{className:"grid grid-cols-3 gap-y-2 text-sm",children:s.map((e,s)=>{let[a,t]=e;return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)("dt",{className:"text-gray-500",children:a}),(0,r.jsx)("dd",{className:"col-span-2",children:t})]},s)})})}function N(){return(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})}function f(e){return e?(0,r.jsx)("a",{className:"text-blue-700 hover:underline break-all",href:e,target:"_blank",rel:"noreferrer",children:e}):"\u2014"}function k(e){return e?(0,r.jsx)("span",{children:e}):"\u2014"}function C(e){let{label:s,value:a,onChange:l,className:t}=e,n=(0,d.A)(e,g);return(0,r.jsxs)("div",{children:[s&&(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:s}),(0,r.jsx)("input",(0,o.A)({value:a,onChange:e=>l(e.target.value),className:"w-full rounded border px-3 py-2 ".concat(t||"")},n))]})}function w(e){let{label:s,value:a,onChange:l,options:t=[]}=e;const n="string"===typeof t[0]?t.map(e=>({label:e,value:e})):t;return(0,r.jsxs)("div",{children:[s&&(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:s}),(0,r.jsx)("select",{value:a,onChange:e=>l(e.target.value),className:"w-full rounded border px-3 py-2",children:n.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))})]})}const A={overview:"",diagrams:[{label:"System Context",url:""}],services:[{name:"web",language:"TypeScript",runtime:"Node 20",repoUrl:"",owner:"App Team"}],apis:[{name:"Tasks",method:"GET",path:"/api/tasks",auth:"JWT",service:"web",description:""}],dataStores:[{name:"app-db",type:"PostgreSQL",version:"15",purpose:"Primary OLTP"}],queues:[{name:"events",tech:"Kafka",purpose:"Domain events"}],thirdParty:[{name:"Stripe",purpose:"Payments",docsUrl:""}],observability:{logs:"CloudWatch",metrics:"Prometheus",tracing:"OpenTelemetry",dashboardsUrl:"",alertsUrl:""},security:{encryptionAtRest:!0,encryptionInTransit:!0,threatModelUrl:"",dataRetentionNotes:"",corsPolicy:"",cspNotes:""},availability:{sla:"99.9%",slo:"99.9%",rpo:"15m",rto:"30m"},scaling:{strategy:"Horizontal",autoScaling:!0,notes:""},decisions:[{date:"2025-09-10",title:"Pick Postgres",status:"Accepted",link:""}],risks:[{risk:"Vendor lock-in",mitigation:"Abstract provider"}],tags:["microservice","rest"]},S=e=>{let{onClick:s,children:a}=e;return(0,r.jsx)("button",{type:"button",onClick:s,className:"px-2 py-1 rounded border text-xs hover:bg-gray-50",children:a})};function R(e){let{value:s=[],onChange:a}=e;const l=(e,l)=>{const t=[...s];t[e]=(0,o.A)((0,o.A)({},t[e]),l),a(t)};return(0,r.jsxs)("div",{className:"overflow-auto",children:[(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,r.jsx)("th",{className:"py-2 pr-3",children:"Name"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Language"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Runtime"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Repo"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Owner"}),(0,r.jsx)("th",{className:"py-2"})]})}),(0,r.jsx)("tbody",{children:s.map((e,t)=>(0,r.jsxs)("tr",{className:"border-t",children:[(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e.name,onChange:e=>l(t,{name:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e.language,onChange:e=>l(t,{language:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e.runtime,onChange:e=>l(t,{runtime:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e.repoUrl,onChange:e=>l(t,{repoUrl:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e.owner,onChange:e=>l(t,{owner:e.target.value})})}),(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)(S,{onClick:()=>(e=>a(s.filter((s,a)=>a!==e)))(t),children:"Remove"})})]},t))})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(S,{onClick:()=>a([...s,{name:"",language:"",runtime:"",repoUrl:"",owner:""}]),children:"Add service"})})]})}function P(e){let{value:s=[],onChange:a}=e;const l=(e,l)=>{const t=[...s];t[e]=(0,o.A)((0,o.A)({},t[e]),l),a(t)};return(0,r.jsxs)("div",{className:"overflow-auto",children:[(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,r.jsx)("th",{className:"py-2 pr-3",children:"Name"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Method"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Path"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Auth"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Service"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Description"}),(0,r.jsx)("th",{className:"py-2"})]})}),(0,r.jsx)("tbody",{children:s.map((e,t)=>(0,r.jsxs)("tr",{className:"border-t",children:[(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e.name,onChange:e=>l(t,{name:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("select",{className:"rounded border px-2 py-1",value:e.method,onChange:e=>l(t,{method:e.target.value}),children:["GET","POST","PUT","PATCH","DELETE"].map(e=>(0,r.jsx)("option",{children:e},e))})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1 font-mono",value:e.path,onChange:e=>l(t,{path:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("select",{className:"rounded border px-2 py-1",value:e.auth,onChange:e=>l(t,{auth:e.target.value}),children:["None","API Key","OAuth2","JWT"].map(e=>(0,r.jsx)("option",{children:e},e))})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e.service,onChange:e=>l(t,{service:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e.description,onChange:e=>l(t,{description:e.target.value})})}),(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)(S,{onClick:()=>(e=>a(s.filter((s,a)=>a!==e)))(t),children:"Remove"})})]},t))})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(S,{onClick:()=>a([...s,{name:"",method:"GET",path:"",auth:"None",service:"",description:""}]),children:"Add API"})})]})}function U(e){let{value:s=[],onChange:a,columns:l}=e;return(0,r.jsxs)("div",{className:"overflow-auto",children:[(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[l.map(e=>(0,r.jsx)("th",{className:"py-2 pr-3",children:e.label},e.key)),(0,r.jsx)("th",{className:"py-2"})]})}),(0,r.jsx)("tbody",{children:s.map((e,t)=>(0,r.jsxs)("tr",{className:"border-t",children:[l.map(l=>(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e[l.key]||"",onChange:e=>((e,l,t)=>{const r=[...s];r[e]=(0,o.A)((0,o.A)({},r[e]),{},{[l]:t}),a(r)})(t,l.key,e.target.value)})},l.key)),(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)(S,{onClick:()=>(e=>a(s.filter((s,a)=>a!==e)))(t),children:"Remove"})})]},t))})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(S,{onClick:()=>a([...s,Object.fromEntries(l.map(e=>[e.key,""]))]),children:"Add"})})]})}const D={overview:"",engines:[{label:"Primary OLTP",type:"PostgreSQL",version:"15",host:"",port:5432,dbName:"",user:"",url:""}],schemas:[{name:"public",description:""}],entities:[{name:"Task",table:"tasks",description:"User task items",fields:[{name:"id",type:"uuid",pk:!0,nullable:!1,default:""}],indexes:[{name:"tasks_pkey",columns:"id",type:"PRIMARY"}]}],relationships:[{from:"tasks.project_id",to:"projects.id",type:"many-to-one",onDelete:"cascade"}],migrations:{tool:"",path:"",notes:""},seed:{strategy:"idempotent scripts",path:""},performance:{poolMin:0,poolMax:10,timeoutMs:1e4,readReplicas:0,partitioning:"",sharding:"",cachingLayer:""},backups:{enabled:!0,schedule:"daily 02:00 UTC",retentionDays:30,location:"",restoreTestCadence:"monthly"},dataRetention:[{table:"events",retention:"30d",policy:""}],security:{atRest:!0,inTransit:!0,rowLevelSecurity:!1,accessModel:"RBAC",piiTables:["users"]},queriesOfInterest:[{name:"List tasks by project",sql:"SELECT ...",notes:""}],incidents:[{date:"2025-09-11",summary:"Lock contention on tasks",actionItems:"Add index on ..."}],tags:["oltp"]},L=e=>{let{onClick:s,children:a}=e;return(0,r.jsx)("button",{type:"button",onClick:s,className:"px-2 py-1 rounded border text-xs hover:bg-gray-50",children:a})};function T(e){let{value:s=[],onChange:a,columns:l}=e;return(0,r.jsxs)("div",{className:"overflow-auto",children:[(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[l.map(e=>(0,r.jsx)("th",{className:"py-2 pr-3",children:e.label},e.key)),(0,r.jsx)("th",{className:"py-2"})]})}),(0,r.jsx)("tbody",{children:s.map((e,t)=>(0,r.jsxs)("tr",{className:"border-t",children:[l.map(l=>(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e[l.key]||"",onChange:e=>((e,l,t)=>{const r=[...s];r[e]=(0,o.A)((0,o.A)({},r[e]),{},{[l]:t}),a(r)})(t,l.key,e.target.value)})},l.key)),(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)(L,{onClick:()=>(e=>a(s.filter((s,a)=>a!==e)))(t),children:"Remove"})})]},t))})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(L,{onClick:()=>a([...s,Object.fromEntries(l.map(e=>[e.key,""]))]),children:"Add"})})]})}function E(e){let{value:s=[],onChange:a}=e;const l=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>"".concat(e.name,":").concat(e.type).concat(!1===e.nullable||e.pk?"!":"")).join(", ")},t=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(e=>"".concat(e.name,"(").concat(e.columns||"",")")).join(", ")},n=(e,l)=>{const t=[...s];t[e]=(0,o.A)((0,o.A)({},t[e]),l),a(t)};return(0,r.jsxs)("div",{className:"overflow-auto",children:[(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,r.jsx)("th",{className:"py-2 pr-3",children:"Entity"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Table"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Description"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Fields"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Indexes"}),(0,r.jsx)("th",{className:"py-2"})]})}),(0,r.jsx)("tbody",{children:s.map((e,i)=>(0,r.jsxs)("tr",{className:"border-t align-top",children:[(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-40 rounded border px-2 py-1",value:e.name,onChange:e=>n(i,{name:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-40 rounded border px-2 py-1 font-mono",value:e.table,onChange:e=>n(i,{table:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-64 rounded border px-2 py-1",value:e.description||"",onChange:e=>n(i,{description:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-72 rounded border px-2 py-1 font-mono",placeholder:"id:uuid!, project_id:uuid, title:text",value:l(e.fields),onChange:e=>{return n(i,{fields:(s=e.target.value,(s||"").split(",").map(e=>e.trim()).filter(Boolean).map(e=>{const[s,a]=e.split(":").map(e=>(e||"").trim()),l=(a||"").endsWith("!");return{name:s,type:l?a.slice(0,-1):a,nullable:!l}}))});var s}})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-72 rounded border px-2 py-1 font-mono",placeholder:"tasks_pkey(id), idx_tasks_project(project_id)",value:t(e.indexes),onChange:e=>{return n(i,{indexes:(s=e.target.value,(s||"").split(",").map(e=>e.trim()).filter(Boolean).map(e=>{var s,a,l;return{name:null===(s=e.split("(")[0])||void 0===s?void 0:s.trim(),columns:(null===(a=e.match(/\((.*)\)/))||void 0===a||null===(l=a[1])||void 0===l?void 0:l.trim())||"",type:""}}))});var s}})}),(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)(L,{onClick:()=>(e=>a(s.filter((s,a)=>a!==e)))(i),children:"Remove"})})]},i))})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(L,{onClick:()=>a([...s,{name:"",table:"",description:"",fields:[],indexes:[]}]),children:"Add entity"})})]})}function I(e){let{value:s,onChange:a,placeholder:l}=e;return(0,r.jsx)("textarea",{value:s,onChange:e=>null===a||void 0===a?void 0:a(e.target.value),placeholder:l,className:"w-full min-h-[220px] border rounded p-3 focus:outline-none"})}var M=a(96);const O=new M.xI.Renderer;function V(e){let{text:s}=e;const a=M.xI.parse(s||"",{renderer:O});return(0,r.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:a}})}function _(e){let{sectionKey:s,placeholder:a}=e;const{selected:n,updateSection:i}=(0,t.A)(),[c,d]=(0,l.useState)("read"),[o,m]=(0,l.useState)("");(0,l.useEffect)(()=>{var e;m((null===n||void 0===n||null===(e=n.sections)||void 0===e?void 0:e[s])||"")},[n,s]);return n?(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("div",{className:"ml-auto flex gap-2",children:"read"===c?(0,r.jsx)("button",{onClick:()=>d("edit"),className:"px-3 py-2 rounded bg-gray-200",children:"Edit"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>d("read"),className:"px-3 py-2 rounded bg-gray-200",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{i(s,o),d("read")},className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save"})]})})}),"read"===c?null!==o&&void 0!==o&&o.trim()?(0,r.jsx)("div",{className:"rounded border bg-white p-4",children:(0,r.jsx)(V,{text:o})}):(0,r.jsxs)("div",{className:"rounded-lg border bg-white p-8 text-gray-500",children:["Nothing here yet. Click ",(0,r.jsx)("strong",{children:"Edit"})," to add content."]}):(0,r.jsx)(I,{value:o,onChange:m,placeholder:a})]}):(0,r.jsx)("div",{className:"rounded-lg border bg-white p-8 text-gray-600",children:"Create or select a project on the left to edit this section."})}O.link=(e,s,a)=>{const l=s?' title="'.concat(s,'"'):"";return'<a href="'.concat(e,'"').concat(l,' target="_blank" rel="noopener noreferrer">').concat(a,"</a>")},M.xI.setOptions({breaks:!0});const B={overview:"",bookmarks:[{label:"Production",url:"https://app.example.com",notes:""}],categories:[{name:"Repositories",links:[]},{name:"Documentation",links:[]},{name:"Design",links:[]},{name:"Monitoring",links:[]},{name:"Dashboards",links:[]},{name:"Services / Vendors",links:[]},{name:"Environments",links:[]}],tags:[]},F=e=>{let{onClick:s,children:a}=e;return(0,r.jsx)("button",{type:"button",onClick:s,className:"px-2 py-1 rounded border text-xs hover:bg-gray-50",children:a})};function K(e){let{value:s=[],onChange:a,columns:l}=e;return(0,r.jsxs)("div",{className:"overflow-auto",children:[(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[l.map(e=>(0,r.jsx)("th",{className:"py-2 pr-3",children:e.label},e.key)),(0,r.jsx)("th",{className:"py-2"})]})}),(0,r.jsx)("tbody",{children:s.map((e,t)=>(0,r.jsxs)("tr",{className:"border-t",children:[l.map(l=>(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1",value:e[l.key]||"",onChange:e=>((e,l,t)=>{const r=[...s];r[e]=(0,o.A)((0,o.A)({},r[e]),{},{[l]:t}),a(r)})(t,l.key,e.target.value),placeholder:l.placeholder})},l.key)),(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)(F,{onClick:()=>(e=>a(s.filter((s,a)=>a!==e)))(t),children:"Remove"})})]},t))})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(F,{onClick:()=>a([...s,Object.fromEntries(l.map(e=>[e.key,""]))]),children:"Add"})})]})}const H={overview:"How we build, ship, verify, and roll back the app across environments.",global:{repository:"",pipeline:"",artifactRegistry:"",runtimeNotes:"Node 20 / Python 3.11",onCallContact:""},environments:[{key:"dev",label:"Development",domains:{app:"",api:""},frontend:{buildCmd:"npm ci && npm run build",artifact:"",container:{image:"",tag:"latest",registry:""},deployCmd:"npx wrangler pages deploy ./dist",cdn:"Cloudflare",notes:""},backend:{runtime:"FastAPI / Uvicorn",buildCmd:"poetry install && poetry build",container:{image:"",tag:"latest",registry:""},migrationsCmd:"alembic upgrade head",deployCmd:"kubectl apply -f k8s/dev",notes:""},database:{engine:"PostgreSQL",version:"",host:"",name:"",user:"",migrationTool:"Alembic",backupPolicy:"Daily (7 days)",readReplicas:!1,notes:""},envVars:[{key:"APP_URL",value:"",secret:!1},{key:"API_URL",value:"",secret:!1}],preChecks:["CI pipeline green","No critical open incidents"],postChecks:["Basic smoke tests pass","Error rate < 1% for 10 min"],rollback:{strategy:"Re-deploy previous image tag",command:"",notes:""}},{key:"staging",label:"Staging",domains:{app:"",api:""},frontend:{buildCmd:"npm ci && npm run build",artifact:"",container:{image:"",tag:"",registry:""},deployCmd:"aws s3 sync dist s3://my-site-staging",cdn:"CloudFront",notes:""},backend:{runtime:"FastAPI / Uvicorn",buildCmd:"poetry install && poetry build",container:{image:"",tag:"",registry:""},migrationsCmd:"alembic upgrade head",deployCmd:"kubectl apply -f k8s/staging",notes:""},database:{engine:"PostgreSQL",version:"",host:"",name:"",user:"",migrationTool:"Alembic",backupPolicy:"Daily (14 days)",readReplicas:!0,notes:""},envVars:[{key:"APP_URL",value:"",secret:!1},{key:"API_URL",value:"",secret:!1}],preChecks:["Staging parity with prod (schema/flags)","Change request approved"],postChecks:["QA smoke tests pass","Synthetic checks green"],rollback:{strategy:"Previous image tag / DB restore (if needed)",command:"",notes:""}},{key:"prod",label:"Production",domains:{app:"",api:""},frontend:{buildCmd:"npm ci && npm run build",artifact:"",container:{image:"",tag:"",registry:""},deployCmd:"aws s3 sync dist s3://my-site-prod --delete",cdn:"CloudFront",notes:"Invalidate CDN after deploy."},backend:{runtime:"FastAPI / Uvicorn (HA)",buildCmd:"poetry install && poetry build",container:{image:"",tag:"",registry:""},migrationsCmd:"alembic upgrade head",deployCmd:"kubectl rollout restart deploy/api -n prod",notes:"Blue/green or canary preferred."},database:{engine:"PostgreSQL (managed)",version:"",host:"",name:"",user:"",migrationTool:"Alembic",backupPolicy:"Point-in-time, 30 days",readReplicas:!0,notes:""},envVars:[{key:"APP_URL",value:"",secret:!1},{key:"API_URL",value:"",secret:!1}],preChecks:["Change freeze respected","SLOs healthy","On-call aware"],postChecks:["Business smoke tests pass","No alert spikes","CDN cache invalidation completed"],rollback:{strategy:"Rollback to previous deployment revision",command:"kubectl rollout undo deploy/api -n prod",notes:"If schema changed, run down migration cautiously."}}]},Y=e=>{let{onClick:s,children:a}=e;return(0,r.jsx)("button",{type:"button",onClick:s,className:"px-2 py-1 rounded border text-xs hover:bg-gray-50",children:a})};function q(e){let{value:s=[],onChange:a}=e;const l=(e,l)=>{const t=[...s];t[e]=(0,o.A)((0,o.A)({},t[e]),l),a(t)};return(0,r.jsxs)("div",{className:"overflow-auto",children:[(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,r.jsx)("th",{className:"py-2 pr-3",children:"Key"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Value"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Secret"}),(0,r.jsx)("th",{className:"py-2"})]})}),(0,r.jsx)("tbody",{children:s.map((e,t)=>(0,r.jsxs)("tr",{className:"border-t",children:[(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1 font-mono",value:e.key,onChange:e=>l(t,{key:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsx)("input",{className:"w-full rounded border px-2 py-1 font-mono",value:e.value,onChange:e=>l(t,{value:e.target.value})})}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(0,r.jsxs)("select",{className:"rounded border px-2 py-1",value:e.secret?"yes":"no",onChange:e=>l(t,{secret:"yes"===e.target.value}),children:[(0,r.jsx)("option",{value:"no",children:"No"}),(0,r.jsx)("option",{value:"yes",children:"Yes"})]})}),(0,r.jsx)("td",{className:"py-2",children:(0,r.jsx)(Y,{onClick:()=>(e=>a(s.filter((s,a)=>a!==e)))(t),children:"Remove"})})]},t))})]}),(0,r.jsx)("div",{className:"mt-3",children:(0,r.jsx)(Y,{onClick:()=>a([...s,{key:"",value:"",secret:!1}]),children:"Add variable"})})]})}var Q=a(6041),G=a(8424);const z=[{key:"setup",title:"Setup",comp:j},{key:"architecture",title:"Architecture",comp:function(){const{selected:e,updateSection:s}=(0,t.A)(),a=(0,l.useMemo)(()=>{var s;return null!==e&&void 0!==e&&null!==(s=e.sections)&&void 0!==s&&s.architecture&&"object"===typeof e.sections.architecture?e.sections.architecture:A},[e]),[n,i]=(0,l.useState)("read"),[c,d]=(0,l.useState)(A);(0,l.useEffect)(()=>{d(a||A),i("read")},[a,null===e||void 0===e?void 0:e.id]);const x=e=>d(s=>(0,o.A)((0,o.A)({},s),e));return e?"read"===n?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Architecture"}),(0,r.jsx)(m.A,{onClick:()=>i("edit"),children:"Edit"})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Overview"}),(0,r.jsx)("p",{className:"text-sm whitespace-pre-line",children:c.overview||"\u2014"})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Diagrams"}),null!==(p=c.diagrams)&&void 0!==p&&p.length?(0,r.jsx)("ul",{className:"text-sm list-disc pl-5",children:c.diagrams.map((e,s)=>(0,r.jsxs)("li",{children:[e.label?"".concat(e.label,": "):"",e.url?(0,r.jsx)("a",{className:"text-blue-700 hover:underline break-all",href:e.url,target:"_blank",rel:"noreferrer",children:e.url}):"\u2014"]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Services"}),null!==(u=c.services)&&void 0!==u&&u.length?(0,r.jsx)("ul",{className:"text-sm space-y-2",children:c.services.map((e,s)=>(0,r.jsxs)("li",{className:"break-words",children:[(0,r.jsx)("span",{className:"font-medium",children:e.name||"Service"})," ","\u2014 ",e.language||"?"," @ ",e.runtime||"?",e.repoUrl&&(0,r.jsxs)(r.Fragment,{children:[" ","(",(0,r.jsx)("a",{className:"text-blue-700 hover:underline",href:e.repoUrl,target:"_blank",rel:"noreferrer",children:"repo"}),")"]}),e.owner?" \u2014 ".concat(e.owner):""]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Data stores"}),null!==(b=c.dataStores)&&void 0!==b&&b.length?(0,r.jsx)("ul",{className:"text-sm space-y-2",children:c.dataStores.map((e,s)=>(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.name||"Store"})," ","\u2014 ",e.type||"Type"," ",e.version?"(".concat(e.version,")"):""," \u2014"," ",e.purpose||"\u2014"]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"APIs"}),null!==(g=c.apis)&&void 0!==g&&g.length?(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,r.jsx)("th",{className:"py-2 pr-3",children:"Name"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Method"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Path"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Auth"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Service"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Description"})]})}),(0,r.jsx)("tbody",{children:c.apis.map((e,s)=>(0,r.jsxs)("tr",{className:"border-t",children:[(0,r.jsx)("td",{className:"py-2 pr-3",children:e.name||"\u2014"}),(0,r.jsx)("td",{className:"py-2 pr-3",children:e.method||"\u2014"}),(0,r.jsx)("td",{className:"py-2 pr-3 font-mono",children:e.path||"\u2014"}),(0,r.jsx)("td",{className:"py-2 pr-3",children:e.auth||"\u2014"}),(0,r.jsx)("td",{className:"py-2 pr-3",children:e.service||"\u2014"}),(0,r.jsx)("td",{className:"py-2 pr-3",children:e.description||"\u2014"})]},s))})]})}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Queues / streams"}),null!==(j=c.queues)&&void 0!==j&&j.length?(0,r.jsx)("ul",{className:"text-sm list-disc pl-5",children:c.queues.map((e,s)=>(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.name||"Queue"})," \u2014"," ",e.tech||"Tech"," \u2014 ",e.purpose||"\u2014"]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"3rd-party dependencies"}),null!==(y=c.thirdParty)&&void 0!==y&&y.length?(0,r.jsx)("ul",{className:"text-sm list-disc pl-5",children:c.thirdParty.map((e,s)=>(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.name||"Vendor"})," \u2014"," ",e.purpose||"\u2014"," ",e.docsUrl&&(0,r.jsx)("a",{className:"text-blue-700 hover:underline break-all ml-1",href:e.docsUrl,target:"_blank",rel:"noreferrer",children:"docs"})]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Observability"}),(0,r.jsxs)("dl",{className:"grid grid-cols-3 gap-y-2 text-sm",children:[(0,r.jsx)("dt",{className:"text-gray-500",children:"Logs"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.observability.logs||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Metrics"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.observability.metrics||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Tracing"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.observability.tracing||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Dashboards"}),(0,r.jsx)("dd",{className:"col-span-2 break-all",children:c.observability.dashboardsUrl?(0,r.jsx)("a",{className:"text-blue-700 hover:underline",href:c.observability.dashboardsUrl,target:"_blank",rel:"noreferrer",children:c.observability.dashboardsUrl}):"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Alerts"}),(0,r.jsx)("dd",{className:"col-span-2 break-all",children:c.observability.alertsUrl?(0,r.jsx)("a",{className:"text-blue-700 hover:underline",href:c.observability.alertsUrl,target:"_blank",rel:"noreferrer",children:c.observability.alertsUrl}):"\u2014"})]})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Security"}),(0,r.jsxs)("dl",{className:"grid grid-cols-3 gap-y-2 text-sm",children:[(0,r.jsx)("dt",{className:"text-gray-500",children:"At rest"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.security.encryptionAtRest?"Yes":"No"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"In transit"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.security.encryptionInTransit?"Yes":"No"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Threat model"}),(0,r.jsx)("dd",{className:"col-span-2 break-all",children:c.security.threatModelUrl?(0,r.jsx)("a",{className:"text-blue-700 hover:underline",href:c.security.threatModelUrl,target:"_blank",rel:"noreferrer",children:c.security.threatModelUrl}):"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Retention"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.security.dataRetentionNotes||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"CORS"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.security.corsPolicy||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"CSP"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.security.cspNotes||"\u2014"})]})]})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Availability"}),(0,r.jsxs)("ul",{className:"text-sm",children:[(0,r.jsxs)("li",{children:["SLA: ",c.availability.sla||"\u2014"]}),(0,r.jsxs)("li",{children:["SLO: ",c.availability.slo||"\u2014"]}),(0,r.jsxs)("li",{children:["RPO: ",c.availability.rpo||"\u2014"]}),(0,r.jsxs)("li",{children:["RTO: ",c.availability.rto||"\u2014"]})]})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Scaling"}),(0,r.jsxs)("ul",{className:"text-sm",children:[(0,r.jsxs)("li",{children:["Strategy: ",c.scaling.strategy||"\u2014"]}),(0,r.jsxs)("li",{children:["Autoscaling: ",c.scaling.autoScaling?"Yes":"No"]}),(0,r.jsxs)("li",{children:["Notes: ",c.scaling.notes||"\u2014"]})]})]})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Architecture decisions"}),null!==(v=c.decisions)&&void 0!==v&&v.length?(0,r.jsx)("ul",{className:"text-sm list-disc pl-5",children:c.decisions.map((e,s)=>(0,r.jsxs)("li",{children:[(0,r.jsxs)("span",{className:"font-medium",children:[e.date?"".concat(e.date,": "):"",e.title||"Decision"]})," ","\u2014 ",e.status||"Status"," ",e.link&&(0,r.jsx)("a",{className:"text-blue-700 hover:underline ml-1 break-all",href:e.link,target:"_blank",rel:"noreferrer",children:"link"})]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Risks"}),null!==(N=c.risks)&&void 0!==N&&N.length?(0,r.jsx)("ul",{className:"text-sm list-disc pl-5",children:c.risks.map((e,s)=>(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.risk||"Risk"})," \u2014"," ",e.mitigation||"Mitigation TBD"]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Tags"}),null!==(f=c.tags)&&void 0!==f&&f.length?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:c.tags.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded bg-gray-100 text-xs",children:e},e))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]})]}):(0,r.jsxs)("form",{className:"space-y-6",onSubmit:e=>{e.preventDefault(),s("architecture",c),i("read")},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Edit Architecture"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(m.A,{onClick:()=>i("read"),children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save"})]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Overview"}),(0,r.jsx)("textarea",{rows:4,className:"w-full rounded border px-3 py-2",value:c.overview,onChange:e=>x({overview:e.target.value}),placeholder:"Brief description of the system, key components and how they interact\u2026"})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Diagrams"}),(0,r.jsx)(U,{value:c.diagrams,onChange:e=>x({diagrams:e}),columns:[{key:"label",label:"Label"},{key:"url",label:"URL"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Services"}),(0,r.jsx)(R,{value:c.services,onChange:e=>x({services:e})})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"APIs"}),(0,r.jsx)(P,{value:c.apis,onChange:e=>x({apis:e})})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Data stores"}),(0,r.jsx)(U,{value:c.dataStores,onChange:e=>x({dataStores:e}),columns:[{key:"name",label:"Name"},{key:"type",label:"Type"},{key:"version",label:"Version"},{key:"purpose",label:"Purpose"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Queues / streams"}),(0,r.jsx)(U,{value:c.queues,onChange:e=>x({queues:e}),columns:[{key:"name",label:"Name"},{key:"tech",label:"Tech"},{key:"purpose",label:"Purpose"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"3rd-party dependencies"}),(0,r.jsx)(U,{value:c.thirdParty,onChange:e=>x({thirdParty:e}),columns:[{key:"name",label:"Name"},{key:"purpose",label:"Purpose"},{key:"docsUrl",label:"Docs URL"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Observability"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Logs"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.observability.logs,onChange:e=>x({observability:(0,o.A)((0,o.A)({},c.observability),{},{logs:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Metrics"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.observability.metrics,onChange:e=>x({observability:(0,o.A)((0,o.A)({},c.observability),{},{metrics:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Tracing"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.observability.tracing,onChange:e=>x({observability:(0,o.A)((0,o.A)({},c.observability),{},{tracing:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Dashboards URL"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.observability.dashboardsUrl,onChange:e=>x({observability:(0,o.A)((0,o.A)({},c.observability),{},{dashboardsUrl:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Alerts URL"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.observability.alertsUrl,onChange:e=>x({observability:(0,o.A)((0,o.A)({},c.observability),{},{alertsUrl:e.target.value})})})]})]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Security"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:!!c.security.encryptionAtRest,onChange:e=>x({security:(0,o.A)((0,o.A)({},c.security),{},{encryptionAtRest:e.target.checked})})}),(0,r.jsx)("span",{className:"text-sm",children:"Encryption at rest"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:!!c.security.encryptionInTransit,onChange:e=>x({security:(0,o.A)((0,o.A)({},c.security),{},{encryptionInTransit:e.target.checked})})}),(0,r.jsx)("span",{className:"text-sm",children:"Encryption in transit"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Threat model URL"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.security.threatModelUrl,onChange:e=>x({security:(0,o.A)((0,o.A)({},c.security),{},{threatModelUrl:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Data retention notes"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.security.dataRetentionNotes,onChange:e=>x({security:(0,o.A)((0,o.A)({},c.security),{},{dataRetentionNotes:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"CORS policy"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.security.corsPolicy,onChange:e=>x({security:(0,o.A)((0,o.A)({},c.security),{},{corsPolicy:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"CSP"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.security.cspNotes,onChange:e=>x({security:(0,o.A)((0,o.A)({},c.security),{},{cspNotes:e.target.value})})})]})]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Availability"}),(0,r.jsx)("div",{className:"grid md:grid-cols-4 gap-4",children:["sla","slo","rpo","rto"].map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1 uppercase",children:e}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.availability[e]||"",onChange:s=>x({availability:(0,o.A)((0,o.A)({},c.availability),{},{[e]:s.target.value})})})]},e))})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Scaling"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Strategy"}),(0,r.jsxs)("select",{className:"w-full rounded border px-3 py-2",value:c.scaling.strategy,onChange:e=>x({scaling:(0,o.A)((0,o.A)({},c.scaling),{},{strategy:e.target.value})}),children:[(0,r.jsx)("option",{children:"Horizontal"}),(0,r.jsx)("option",{children:"Vertical"}),(0,r.jsx)("option",{children:"Mixed"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:!!c.scaling.autoScaling,onChange:e=>x({scaling:(0,o.A)((0,o.A)({},c.scaling),{},{autoScaling:e.target.checked})})}),(0,r.jsx)("span",{className:"text-sm",children:"Enable autoscaling"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Notes"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.scaling.notes,onChange:e=>x({scaling:(0,o.A)((0,o.A)({},c.scaling),{},{notes:e.target.value})})})]})]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Architecture decisions (ADR)"}),(0,r.jsx)(U,{value:c.decisions,onChange:e=>x({decisions:e}),columns:[{key:"date",label:"Date"},{key:"title",label:"Title"},{key:"status",label:"Status"},{key:"link",label:"Link"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Risks"}),(0,r.jsx)(U,{value:c.risks,onChange:e=>x({risks:e}),columns:[{key:"risk",label:"Risk"},{key:"mitigation",label:"Mitigation"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Tags"}),(0,r.jsx)(h.A,{value:c.tags||[],onChange:e=>x({tags:e}),placeholder:"Add a tag and press Enter"})]})]}):(0,r.jsxs)("div",{className:"rounded-lg border bg-white p-8 text-gray-600",children:["Create or select a project on the left to manage"," ",(0,r.jsx)("strong",{children:"Architecture"}),"."]});var p,u,b,g,j,y,v,N,f}},{key:"database",title:"Database",comp:function(){const{selected:e,updateSection:s}=(0,t.A)(),a=(0,l.useMemo)(()=>{var s;return null!==e&&void 0!==e&&null!==(s=e.sections)&&void 0!==s&&s.database&&"object"===typeof e.sections.database?e.sections.database:D},[e]),[n,i]=(0,l.useState)("read"),[c,d]=(0,l.useState)(D);(0,l.useEffect)(()=>{d(a||D),i("read")},[a,null===e||void 0===e?void 0:e.id]);const x=e=>d(s=>(0,o.A)((0,o.A)({},s),e));return e?"read"===n?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Database"}),(0,r.jsx)(m.A,{onClick:()=>i("edit"),children:"Edit"})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Overview"}),(0,r.jsx)("p",{className:"text-sm whitespace-pre-line",children:c.overview||"\u2014"})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Engines"}),null!==(p=c.engines)&&void 0!==p&&p.length?(0,r.jsx)("ul",{className:"text-sm space-y-2",children:c.engines.map((e,s)=>(0,r.jsxs)("li",{className:"break-words",children:[(0,r.jsx)("span",{className:"font-medium",children:e.label||"Engine"})," ","\u2014 ",e.type||"Type"," ",e.version?"(".concat(e.version,")"):""," \u2014"," ",e.host||"",e.port?":".concat(e.port):""," ",e.dbName?"/".concat(e.dbName):"",e.url&&(0,r.jsxs)(r.Fragment,{children:[" ","(",(0,r.jsx)("a",{className:"text-blue-700 hover:underline",href:e.url,target:"_blank",rel:"noreferrer",children:"url"}),")"]})]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Schemas"}),null!==(u=c.schemas)&&void 0!==u&&u.length?(0,r.jsx)("ul",{className:"text-sm list-disc pl-5",children:c.schemas.map((e,s)=>(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.name||"Schema"})," ","\u2014 ",e.description||"\u2014"]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Entities"}),null!==(b=c.entities)&&void 0!==b&&b.length?(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,r.jsx)("th",{className:"py-2 pr-3",children:"Entity"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Table"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Fields"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Indexes"})]})}),(0,r.jsx)("tbody",{children:c.entities.map((e,s)=>(0,r.jsxs)("tr",{className:"border-t align-top",children:[(0,r.jsxs)("td",{className:"py-2 pr-3",children:[(0,r.jsx)("span",{className:"font-medium",children:e.name||"\u2014"}),(0,r.jsx)("div",{className:"text-gray-500",children:e.description||""})]}),(0,r.jsx)("td",{className:"py-2 pr-3 font-mono",children:e.table||"\u2014"}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(e.fields||[]).length?e.fields.map(e=>"".concat(e.name,":").concat(e.type).concat(!1===e.nullable||e.pk?"!":"")).join(", "):"\u2014"}),(0,r.jsx)("td",{className:"py-2 pr-3",children:(e.indexes||[]).length?e.indexes.map(e=>"".concat(e.name,"(").concat(e.columns,")")).join(", "):"\u2014"})]},s))})]})}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Relationships"}),null!==(g=c.relationships)&&void 0!==g&&g.length?(0,r.jsx)("ul",{className:"text-sm list-disc pl-5",children:c.relationships.map((e,s)=>(0,r.jsxs)("li",{children:[e.from||"?"," \u2192 ",e.to||"?"," (",e.type||"relation",")"," ",e.onDelete?"onDelete=".concat(e.onDelete):""]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Backups"}),(0,r.jsxs)("ul",{className:"text-sm",children:[(0,r.jsxs)("li",{children:["Enabled: ",c.backups.enabled?"Yes":"No"]}),(0,r.jsxs)("li",{children:["Schedule: ",c.backups.schedule||"\u2014"]}),(0,r.jsxs)("li",{children:["Retention: ",c.backups.retentionDays||"\u2014"," days"]}),(0,r.jsxs)("li",{children:["Location: ",c.backups.location||"\u2014"]}),(0,r.jsxs)("li",{children:["Restore tests: ",c.backups.restoreTestCadence||"\u2014"]})]})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Performance"}),(0,r.jsxs)("ul",{className:"text-sm",children:[(0,r.jsxs)("li",{children:["Pool: ",c.performance.poolMin,"-",c.performance.poolMax]}),(0,r.jsxs)("li",{children:["Timeout: ",c.performance.timeoutMs," ms"]}),(0,r.jsxs)("li",{children:["Read replicas: ",c.performance.readReplicas]}),(0,r.jsxs)("li",{children:["Partitioning: ",c.performance.partitioning||"\u2014"]}),(0,r.jsxs)("li",{children:["Sharding: ",c.performance.sharding||"\u2014"]}),(0,r.jsxs)("li",{children:["Caching: ",c.performance.cachingLayer||"\u2014"]})]})]})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Security"}),(0,r.jsxs)("ul",{className:"text-sm",children:[(0,r.jsxs)("li",{children:["At rest: ",c.security.atRest?"Yes":"No"]}),(0,r.jsxs)("li",{children:["In transit: ",c.security.inTransit?"Yes":"No"]}),(0,r.jsxs)("li",{children:["RLS: ",c.security.rowLevelSecurity?"Enabled":"Disabled"]}),(0,r.jsxs)("li",{children:["Access model: ",c.security.accessModel||"\u2014"]}),(0,r.jsxs)("li",{children:["PII tables: ",(c.security.piiTables||[]).join(", ")||"\u2014"]})]})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Data retention"}),null!==(j=c.dataRetention)&&void 0!==j&&j.length?(0,r.jsx)("ul",{className:"text-sm list-disc pl-5",children:c.dataRetention.map((e,s)=>(0,r.jsxs)("li",{children:[e.table||"table"," \u2014 ",e.retention||"\u2014"," ",e.policy?"(".concat(e.policy,")"):""]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Queries of interest"}),null!==(y=c.queriesOfInterest)&&void 0!==y&&y.length?(0,r.jsx)("ul",{className:"text-sm space-y-3",children:c.queriesOfInterest.map((e,s)=>(0,r.jsxs)("li",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.name||"Query"}),(0,r.jsx)("pre",{className:"bg-gray-50 rounded p-2 text-xs overflow-auto",children:e.sql||""}),e.notes&&(0,r.jsx)("div",{className:"text-gray-500 text-xs mt-1",children:e.notes})]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Migrations"}),(0,r.jsxs)("ul",{className:"text-sm",children:[(0,r.jsxs)("li",{children:["Tool: ",c.migrations.tool||"\u2014"]}),(0,r.jsxs)("li",{children:["Path: ",c.migrations.path||"\u2014"]}),(0,r.jsxs)("li",{children:["Notes: ",c.migrations.notes||"\u2014"]})]})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Incidents"}),null!==(v=c.incidents)&&void 0!==v&&v.length?(0,r.jsx)("ul",{className:"text-sm list-disc pl-5",children:c.incidents.map((e,s)=>(0,r.jsxs)("li",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.date||"date"})," \u2014 ",e.summary||"\u2014",e.actionItems?" (actions: ".concat(e.actionItems,")"):""]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Tags"}),(c.tags||[]).length?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:c.tags.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded bg-gray-100 text-xs",children:e},e))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]})]}):(0,r.jsxs)("form",{className:"space-y-6",onSubmit:e=>{e.preventDefault(),s("database",c),i("read")},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Edit Database"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(m.A,{onClick:()=>i("read"),children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save"})]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Overview"}),(0,r.jsx)("textarea",{rows:3,className:"w-full rounded border px-3 py-2",value:c.overview,onChange:e=>x({overview:e.target.value}),placeholder:"High-level DB strategy, OLTP/OLAP split, multi-tenant notes\u2026"})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Engines"}),(0,r.jsx)(T,{value:c.engines,onChange:e=>x({engines:e}),columns:[{key:"label",label:"Label"},{key:"type",label:"Type"},{key:"version",label:"Version"},{key:"host",label:"Host"},{key:"port",label:"Port"},{key:"dbName",label:"DB"},{key:"user",label:"User"},{key:"url",label:"URL"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Schemas"}),(0,r.jsx)(T,{value:c.schemas,onChange:e=>x({schemas:e}),columns:[{key:"name",label:"Name"},{key:"description",label:"Description"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Entities"}),(0,r.jsx)(E,{value:c.entities,onChange:e=>x({entities:e})})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Relationships"}),(0,r.jsx)(T,{value:c.relationships,onChange:e=>x({relationships:e}),columns:[{key:"from",label:"From"},{key:"to",label:"To"},{key:"type",label:"Type"},{key:"onDelete",label:"onDelete"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Migrations"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Tool"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.migrations.tool,onChange:e=>x({migrations:(0,o.A)((0,o.A)({},c.migrations),{},{tool:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Path"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.migrations.path,onChange:e=>x({migrations:(0,o.A)((0,o.A)({},c.migrations),{},{path:e.target.value})})})]}),(0,r.jsxs)("div",{className:"md:col-span-3",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Notes"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.migrations.notes,onChange:e=>x({migrations:(0,o.A)((0,o.A)({},c.migrations),{},{notes:e.target.value})})})]})]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Performance"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Pool min"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.performance.poolMin,onChange:e=>x({performance:(0,o.A)((0,o.A)({},c.performance),{},{poolMin:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Pool max"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.performance.poolMax,onChange:e=>x({performance:(0,o.A)((0,o.A)({},c.performance),{},{poolMax:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Timeout (ms)"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.performance.timeoutMs,onChange:e=>x({performance:(0,o.A)((0,o.A)({},c.performance),{},{timeoutMs:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Read replicas"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.performance.readReplicas,onChange:e=>x({performance:(0,o.A)((0,o.A)({},c.performance),{},{readReplicas:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Partitioning"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.performance.partitioning,onChange:e=>x({performance:(0,o.A)((0,o.A)({},c.performance),{},{partitioning:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Sharding"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.performance.sharding,onChange:e=>x({performance:(0,o.A)((0,o.A)({},c.performance),{},{sharding:e.target.value})})})]}),(0,r.jsxs)("div",{className:"md:col-span-3",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Caching layer"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.performance.cachingLayer,onChange:e=>x({performance:(0,o.A)((0,o.A)({},c.performance),{},{cachingLayer:e.target.value})})})]})]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Backups"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:!!c.backups.enabled,onChange:e=>x({backups:(0,o.A)((0,o.A)({},c.backups),{},{enabled:e.target.checked})})}),(0,r.jsx)("span",{className:"text-sm",children:"Enabled"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Schedule"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.backups.schedule,onChange:e=>x({backups:(0,o.A)((0,o.A)({},c.backups),{},{schedule:e.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Retention (days)"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.backups.retentionDays,onChange:e=>x({backups:(0,o.A)((0,o.A)({},c.backups),{},{retentionDays:e.target.value})})})]}),(0,r.jsxs)("div",{className:"md:col-span-3",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Location"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.backups.location,onChange:e=>x({backups:(0,o.A)((0,o.A)({},c.backups),{},{location:e.target.value})})})]}),(0,r.jsxs)("div",{className:"md:col-span-3",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Restore test cadence"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.backups.restoreTestCadence,onChange:e=>x({backups:(0,o.A)((0,o.A)({},c.backups),{},{restoreTestCadence:e.target.value})})})]})]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Data retention"}),(0,r.jsx)(T,{value:c.dataRetention,onChange:e=>x({dataRetention:e}),columns:[{key:"table",label:"Table"},{key:"retention",label:"Retention"},{key:"policy",label:"Policy/notes"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Security"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:!!c.security.atRest,onChange:e=>x({security:(0,o.A)((0,o.A)({},c.security),{},{atRest:e.target.checked})})}),(0,r.jsx)("span",{className:"text-sm",children:"Encryption at rest"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:!!c.security.inTransit,onChange:e=>x({security:(0,o.A)((0,o.A)({},c.security),{},{inTransit:e.target.checked})})}),(0,r.jsx)("span",{className:"text-sm",children:"Encryption in transit"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",checked:!!c.security.rowLevelSecurity,onChange:e=>x({security:(0,o.A)((0,o.A)({},c.security),{},{rowLevelSecurity:e.target.checked})})}),(0,r.jsx)("span",{className:"text-sm",children:"Row-level security"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Access model"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:c.security.accessModel,onChange:e=>x({security:(0,o.A)((0,o.A)({},c.security),{},{accessModel:e.target.value})})})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"PII tables"}),(0,r.jsx)(h.A,{value:c.security.piiTables||[],onChange:e=>x({security:(0,o.A)((0,o.A)({},c.security),{},{piiTables:e})}),placeholder:"Add table and press Enter"})]})]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Queries of interest"}),(0,r.jsx)(T,{value:c.queriesOfInterest,onChange:e=>x({queriesOfInterest:e}),columns:[{key:"name",label:"Name"},{key:"sql",label:"SQL"},{key:"notes",label:"Notes"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Incidents"}),(0,r.jsx)(T,{value:c.incidents,onChange:e=>x({incidents:e}),columns:[{key:"date",label:"Date"},{key:"summary",label:"Summary"},{key:"actionItems",label:"Action items"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Tags"}),(0,r.jsx)(h.A,{value:c.tags||[],onChange:e=>x({tags:e}),placeholder:"Add a tag and press Enter"})]})]}):(0,r.jsxs)("div",{className:"rounded-lg border bg-white p-8 text-gray-600",children:["Create or select a project on the left to manage ",(0,r.jsx)("strong",{children:"Database"}),"."]});var p,u,b,g,j,y,v}},{key:"links",title:"Links",comp:function(){const{selected:e,updateSection:s}=(0,t.A)(),a=(0,l.useMemo)(()=>{var s;return null!==e&&void 0!==e&&null!==(s=e.sections)&&void 0!==s&&s.links&&"object"===typeof e.sections.links?e.sections.links:B},[e]),[n,i]=(0,l.useState)("read"),[c,d]=(0,l.useState)(B);(0,l.useEffect)(()=>{d(a||B),i("read")},[a,null===e||void 0===e?void 0:e.id]);const x=e=>d(s=>(0,o.A)((0,o.A)({},s),e));return e?"read"===n?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Links"}),(0,r.jsx)(m.A,{onClick:()=>i("edit"),children:"Edit"})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Overview"}),(0,r.jsx)("p",{className:"text-sm whitespace-pre-line",children:c.overview||"\u2014"})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Quick bookmarks"}),null!==(p=c.bookmarks)&&void 0!==p&&p.length?(0,r.jsx)("ul",{className:"text-sm space-y-2",children:c.bookmarks.map((e,s)=>(0,r.jsxs)("li",{className:"break-words",children:[(0,r.jsx)("a",{className:"text-blue-700 hover:underline",href:e.url||"#",target:"_blank",rel:"noreferrer",children:e.label||e.url||"Link"}),e.notes?(0,r.jsxs)("span",{className:"text-gray-500",children:[" \u2014 ",e.notes]}):null]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsx)("div",{className:"space-y-6",children:null===(u=c.categories)||void 0===u?void 0:u.map((e,s)=>{var a;return(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:e.name||"Category"}),null!==(a=e.links)&&void 0!==a&&a.length?(0,r.jsx)("ul",{className:"text-sm space-y-2",children:e.links.map((e,s)=>(0,r.jsxs)("li",{className:"break-words",children:[(0,r.jsx)("a",{className:"text-blue-700 hover:underline",href:e.url||"#",target:"_blank",rel:"noreferrer",children:e.label||e.url||"Link"}),e.notes?(0,r.jsxs)("span",{className:"text-gray-500",children:[" \u2014 ",e.notes]}):null]},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]},s)})}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Tags"}),(c.tags||[]).length?(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:c.tags.map(e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded bg-gray-100 text-xs",children:e},e))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]})]}):(0,r.jsxs)("form",{className:"space-y-6",onSubmit:e=>{e.preventDefault(),s("links",c),i("read")},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Edit Links"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(m.A,{onClick:()=>i("read"),children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save"})]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Overview"}),(0,r.jsx)("textarea",{rows:3,className:"w-full rounded border px-3 py-2",value:c.overview,onChange:e=>x({overview:e.target.value}),placeholder:"What belongs here? e.g., where to find repos, docs, dashboards, service consoles\u2026"})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Quick bookmarks"}),(0,r.jsx)(K,{value:c.bookmarks,onChange:e=>x({bookmarks:e}),columns:[{key:"label",label:"Label",placeholder:"Production"},{key:"url",label:"URL",placeholder:"https://\u2026"},{key:"notes",label:"Notes",placeholder:"What is this?"}]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("h4",{className:"font-semibold",children:"Categories"}),(0,r.jsx)(F,{onClick:()=>x({categories:[...c.categories||[],{name:"",links:[]}]}),children:"Add category"})]}),(0,r.jsx)("div",{className:"grid lg:grid-cols-2 gap-6",children:(c.categories||[]).map((e,s)=>{const a=e=>{const a=[...c.categories];a[s]=(0,o.A)((0,o.A)({},a[s]),e),x({categories:a})},l=()=>a({links:[...e.links||[],{label:"",url:"",notes:""}]}),t=(s,l)=>{const t=[...e.links||[]];t[s]=(0,o.A)((0,o.A)({},t[s]),l),a({links:t})};return(0,r.jsxs)("div",{className:"rounded border p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("input",{className:"w-64 rounded border px-2 py-1 font-semibold",value:e.name,onChange:e=>a({name:e.target.value}),placeholder:"Category name (e.g., Repositories)"}),(0,r.jsx)(F,{onClick:()=>x({categories:c.categories.filter((e,a)=>a!==s)}),children:"Remove"})]}),0===(e.links||[]).length?(0,r.jsx)("button",{type:"button",onClick:l,className:"text-sm text-blue-700 hover:underline",children:"Add first link"}):(0,r.jsxs)("div",{className:"space-y-3",children:[(e.links||[]).map((s,l)=>(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-2",children:[(0,r.jsx)("input",{className:"rounded border px-2 py-1",value:s.label,onChange:e=>t(l,{label:e.target.value}),placeholder:"Label (e.g., Frontend)"}),(0,r.jsx)("input",{className:"rounded border px-2 py-1",value:s.url,onChange:e=>t(l,{url:e.target.value}),placeholder:"https://\u2026"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{className:"flex-1 rounded border px-2 py-1",value:s.notes||"",onChange:e=>t(l,{notes:e.target.value}),placeholder:"Notes (optional)"}),(0,r.jsx)(F,{onClick:()=>{return s=l,a({links:(e.links||[]).filter((e,a)=>a!==s)});var s},children:"Remove"})]})]},l)),(0,r.jsx)(F,{onClick:l,children:"Add link"})]})]},s)})})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Tags"}),(0,r.jsx)(h.A,{value:c.tags||[],onChange:e=>x({tags:e}),placeholder:"Add a tag and press Enter"})]})]}):(0,r.jsxs)("div",{className:"rounded-lg border bg-white p-8 text-gray-600",children:["Create or select a project on the left to manage ",(0,r.jsx)("strong",{children:"Links"}),"."]});var p,u}},{key:"deployment",title:"Deployment guide",comp:function(){const{selected:e,updateSection:s}=(0,t.A)(),a=(0,l.useMemo)(()=>{var s;return null!==e&&void 0!==e&&null!==(s=e.sections)&&void 0!==s&&s.deployment&&"object"===typeof e.sections.deployment?e.sections.deployment:H},[e]),[n,i]=(0,l.useState)("read"),[c,d]=(0,l.useState)(H);(0,l.useEffect)(()=>{d(a||H),i("read")},[a,null===e||void 0===e?void 0:e.id]);const x=e=>d(s=>(0,o.A)((0,o.A)({},s),e)),p=(e,s)=>x({environments:c.environments.map(a=>a.key===e?(0,o.A)((0,o.A)({},a),s):a)});return e?"read"===n?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Deployment guide"}),(0,r.jsx)(m.A,{onClick:()=>i("edit"),children:"Edit"})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Overview"}),(0,r.jsx)("p",{className:"text-sm whitespace-pre-line",children:c.overview||"\u2014"})]}),(0,r.jsxs)("div",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Global"}),(0,r.jsxs)("dl",{className:"grid grid-cols-3 gap-y-2 text-sm",children:[(0,r.jsx)("dt",{className:"text-gray-500",children:"Repository"}),(0,r.jsx)("dd",{className:"col-span-2 break-all",children:c.global.repository?(0,r.jsx)("a",{className:"text-blue-700 hover:underline",href:c.global.repository,target:"_blank",rel:"noreferrer",children:c.global.repository}):"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Pipeline"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.global.pipeline||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Artifact registry"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.global.artifactRegistry||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Runtime"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.global.runtimeNotes||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"On-call"}),(0,r.jsx)("dd",{className:"col-span-2",children:c.global.onCallContact||"\u2014"})]})]}),c.environments.map(e=>{var s;return(0,r.jsxs)("div",{className:"rounded border bg-white p-4 space-y-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-lg",children:e.label}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsx)("div",{className:"text-xs text-gray-500 mb-1",children:"App URL"}),(0,r.jsx)("div",{className:"break-all",children:e.domains.app?(0,r.jsx)("a",{className:"text-blue-700 hover:underline",href:e.domains.app,target:"_blank",rel:"noreferrer",children:e.domains.app}):"\u2014"}),(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-2 mb-1",children:"API URL"}),(0,r.jsx)("div",{className:"break-all",children:e.domains.api?(0,r.jsx)("a",{className:"text-blue-700 hover:underline",href:e.domains.api,target:"_blank",rel:"noreferrer",children:e.domains.api}):"\u2014"})]}),(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"Frontend"}),(0,r.jsxs)("dl",{className:"grid grid-cols-3 gap-y-1 text-sm",children:[(0,r.jsx)("dt",{className:"text-gray-500",children:"Build"}),(0,r.jsx)("dd",{className:"col-span-2 font-mono",children:e.frontend.buildCmd||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Deploy"}),(0,r.jsx)("dd",{className:"col-span-2 font-mono",children:e.frontend.deployCmd||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"CDN"}),(0,r.jsx)("dd",{className:"col-span-2",children:e.frontend.cdn||"\u2014"})]}),e.frontend.notes?(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:e.frontend.notes}):null]}),(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"Backend"}),(0,r.jsxs)("dl",{className:"grid grid-cols-3 gap-y-1 text-sm",children:[(0,r.jsx)("dt",{className:"text-gray-500",children:"Runtime"}),(0,r.jsx)("dd",{className:"col-span-2",children:e.backend.runtime||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Build"}),(0,r.jsx)("dd",{className:"col-span-2 font-mono",children:e.backend.buildCmd||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Migrations"}),(0,r.jsx)("dd",{className:"col-span-2 font-mono",children:e.backend.migrationsCmd||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Deploy"}),(0,r.jsx)("dd",{className:"col-span-2 font-mono",children:e.backend.deployCmd||"\u2014"})]}),e.backend.notes?(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:e.backend.notes}):null]}),(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"Database"}),(0,r.jsxs)("dl",{className:"grid grid-cols-3 gap-y-1 text-sm",children:[(0,r.jsx)("dt",{className:"text-gray-500",children:"Engine"}),(0,r.jsx)("dd",{className:"col-span-2",children:e.database.engine||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Host"}),(0,r.jsx)("dd",{className:"col-span-2 break-all",children:e.database.host||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Name"}),(0,r.jsx)("dd",{className:"col-span-2",children:e.database.name||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Backups"}),(0,r.jsx)("dd",{className:"col-span-2",children:e.database.backupPolicy||"\u2014"})]}),e.database.notes?(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:e.database.notes}):null]})]}),(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"Environment variables"}),null!==(s=e.envVars)&&void 0!==s&&s.length?(0,r.jsx)("div",{className:"overflow-auto",children:(0,r.jsxs)("table",{className:"min-w-full text-sm",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-500",children:[(0,r.jsx)("th",{className:"py-2 pr-3",children:"Key"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Value"}),(0,r.jsx)("th",{className:"py-2 pr-3",children:"Secret"})]})}),(0,r.jsx)("tbody",{children:e.envVars.map((e,s)=>(0,r.jsxs)("tr",{className:"border-t",children:[(0,r.jsx)("td",{className:"py-2 pr-3 font-mono",children:e.key||"\u2014"}),(0,r.jsx)("td",{className:"py-2 pr-3 font-mono",children:e.value||"\u2014"}),(0,r.jsx)("td",{className:"py-2 pr-3",children:e.secret?"Yes":"No"})]},s))})]})}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"Pre-deployment checks"}),(e.preChecks||[]).length?(0,r.jsx)("ul",{className:"list-disc list-inside text-sm space-y-1",children:e.preChecks.map((e,s)=>(0,r.jsx)("li",{children:e},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"Post-deployment checks"}),(e.postChecks||[]).length?(0,r.jsx)("ul",{className:"list-disc list-inside text-sm space-y-1",children:e.postChecks.map((e,s)=>(0,r.jsx)("li",{children:e},s))}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"\u2014"})]}),(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"Rollback"}),(0,r.jsxs)("dl",{className:"grid grid-cols-3 gap-y-1 text-sm",children:[(0,r.jsx)("dt",{className:"text-gray-500",children:"Strategy"}),(0,r.jsx)("dd",{className:"col-span-2",children:e.rollback.strategy||"\u2014"}),(0,r.jsx)("dt",{className:"text-gray-500",children:"Command"}),(0,r.jsx)("dd",{className:"col-span-2 font-mono",children:e.rollback.command||"\u2014"})]}),e.rollback.notes?(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-2",children:e.rollback.notes}):null]})]})]},e.key)})]}):(0,r.jsxs)("form",{className:"space-y-6",onSubmit:e=>{e.preventDefault(),s("deployment",c),i("read")},children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Edit Deployment guide"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(m.A,{onClick:()=>i("read"),children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-3 py-2 rounded bg-blue-600 text-white",children:"Save"})]})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Overview"}),(0,r.jsx)("textarea",{rows:3,className:"w-full rounded border px-3 py-2",value:c.overview,onChange:e=>x({overview:e.target.value}),placeholder:"Summarize how we deploy, verify, and roll back."})]}),(0,r.jsxs)("section",{className:"rounded border bg-white p-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-3",children:"Global"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"Repository URL",value:c.global.repository,onChange:e=>x({global:(0,o.A)((0,o.A)({},c.global),{},{repository:e.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"Pipeline (e.g. GH Actions workflow)",value:c.global.pipeline,onChange:e=>x({global:(0,o.A)((0,o.A)({},c.global),{},{pipeline:e.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"Artifact registry",value:c.global.artifactRegistry,onChange:e=>x({global:(0,o.A)((0,o.A)({},c.global),{},{artifactRegistry:e.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"Runtime notes",value:c.global.runtimeNotes,onChange:e=>x({global:(0,o.A)((0,o.A)({},c.global),{},{runtimeNotes:e.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2 md:col-span-2",placeholder:"On-call contact (name/email/slack)",value:c.global.onCallContact,onChange:e=>x({global:(0,o.A)((0,o.A)({},c.global),{},{onCallContact:e.target.value})})})]})]}),c.environments.map(e=>(0,r.jsxs)("section",{className:"rounded border bg-white p-4 space-y-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-lg",children:e.label}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"App URL",value:e.domains.app,onChange:s=>p(e.key,{domains:(0,o.A)((0,o.A)({},e.domains),{},{app:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"API URL",value:e.domains.api,onChange:s=>p(e.key,{domains:(0,o.A)((0,o.A)({},e.domains),{},{api:s.target.value})})})]}),(0,r.jsxs)("div",{className:"rounded border p-3 space-y-2",children:[(0,r.jsx)("div",{className:"font-semibold",children:"Frontend"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,r.jsx)("input",{className:"rounded border px-3 py-2 font-mono",placeholder:"Build command",value:e.frontend.buildCmd,onChange:s=>p(e.key,{frontend:(0,o.A)((0,o.A)({},e.frontend),{},{buildCmd:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2 font-mono",placeholder:"Deploy command",value:e.frontend.deployCmd,onChange:s=>p(e.key,{frontend:(0,o.A)((0,o.A)({},e.frontend),{},{deployCmd:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"Artifact (optional)",value:e.frontend.artifact,onChange:s=>p(e.key,{frontend:(0,o.A)((0,o.A)({},e.frontend),{},{artifact:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"CDN (optional)",value:e.frontend.cdn,onChange:s=>p(e.key,{frontend:(0,o.A)((0,o.A)({},e.frontend),{},{cdn:s.target.value})})}),(0,r.jsx)("textarea",{rows:2,className:"md:col-span-2 rounded border px-3 py-2",placeholder:"Notes",value:e.frontend.notes,onChange:s=>p(e.key,{frontend:(0,o.A)((0,o.A)({},e.frontend),{},{notes:s.target.value})})})]})]}),(0,r.jsxs)("div",{className:"rounded border p-3 space-y-2",children:[(0,r.jsx)("div",{className:"font-semibold",children:"Backend"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"Runtime (e.g. FastAPI / Uvicorn)",value:e.backend.runtime,onChange:s=>p(e.key,{backend:(0,o.A)((0,o.A)({},e.backend),{},{runtime:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2 font-mono",placeholder:"Build command",value:e.backend.buildCmd,onChange:s=>p(e.key,{backend:(0,o.A)((0,o.A)({},e.backend),{},{buildCmd:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2 font-mono",placeholder:"Migrations command",value:e.backend.migrationsCmd,onChange:s=>p(e.key,{backend:(0,o.A)((0,o.A)({},e.backend),{},{migrationsCmd:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2 font-mono",placeholder:"Deploy command",value:e.backend.deployCmd,onChange:s=>p(e.key,{backend:(0,o.A)((0,o.A)({},e.backend),{},{deployCmd:s.target.value})})}),(0,r.jsx)("textarea",{rows:2,className:"md:col-span-2 rounded border px-3 py-2",placeholder:"Notes",value:e.backend.notes,onChange:s=>p(e.key,{backend:(0,o.A)((0,o.A)({},e.backend),{},{notes:s.target.value})})})]})]}),(0,r.jsxs)("div",{className:"rounded border p-3 space-y-2",children:[(0,r.jsx)("div",{className:"font-semibold",children:"Database"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-3",children:[(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"Engine (e.g. PostgreSQL)",value:e.database.engine,onChange:s=>p(e.key,{database:(0,o.A)((0,o.A)({},e.database),{},{engine:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"Version",value:e.database.version,onChange:s=>p(e.key,{database:(0,o.A)((0,o.A)({},e.database),{},{version:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"Host",value:e.database.host,onChange:s=>p(e.key,{database:(0,o.A)((0,o.A)({},e.database),{},{host:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"DB name",value:e.database.name,onChange:s=>p(e.key,{database:(0,o.A)((0,o.A)({},e.database),{},{name:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"DB user",value:e.database.user,onChange:s=>p(e.key,{database:(0,o.A)((0,o.A)({},e.database),{},{user:s.target.value})})}),(0,r.jsx)("input",{className:"rounded border px-3 py-2",placeholder:"Backup policy",value:e.database.backupPolicy,onChange:s=>p(e.key,{database:(0,o.A)((0,o.A)({},e.database),{},{backupPolicy:s.target.value})})}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"text-sm text-gray-600 mr-2",children:"Read replicas"}),(0,r.jsxs)("select",{className:"rounded border px-2 py-1",value:e.database.readReplicas?"yes":"no",onChange:s=>p(e.key,{database:(0,o.A)((0,o.A)({},e.database),{},{readReplicas:"yes"===s.target.value})}),children:[(0,r.jsx)("option",{value:"no",children:"No"}),(0,r.jsx)("option",{value:"yes",children:"Yes"})]})]}),(0,r.jsx)("textarea",{rows:2,className:"md:col-span-2 rounded border px-3 py-2",placeholder:"Notes",value:e.database.notes,onChange:s=>p(e.key,{database:(0,o.A)((0,o.A)({},e.database),{},{notes:s.target.value})})})]})]}),(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"Environment variables"}),(0,r.jsx)(q,{value:e.envVars,onChange:s=>p(e.key,{envVars:s})})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"Pre-deployment checks"}),(0,r.jsx)(h.A,{value:e.preChecks||[],onChange:s=>p(e.key,{preChecks:s}),placeholder:"Add check and press Enter"})]}),(0,r.jsxs)("div",{className:"rounded border p-3",children:[(0,r.jsx)("div",{className:"font-semibold mb-2",children:"Post-deployment checks"}),(0,r.jsx)(h.A,{value:e.postChecks||[],onChange:s=>p(e.key,{postChecks:s}),placeholder:"Add check and press Enter"})]})]}),(0,r.jsxs)("div",{className:"rounded border p-3 grid md:grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Rollback strategy"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2",value:e.rollback.strategy,onChange:s=>p(e.key,{rollback:(0,o.A)((0,o.A)({},e.rollback),{},{strategy:s.target.value})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Rollback command"}),(0,r.jsx)("input",{className:"w-full rounded border px-3 py-2 font-mono",value:e.rollback.command,onChange:s=>p(e.key,{rollback:(0,o.A)((0,o.A)({},e.rollback),{},{command:s.target.value})})})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Notes"}),(0,r.jsx)("textarea",{rows:2,className:"w-full rounded border px-3 py-2",value:e.rollback.notes,onChange:s=>p(e.key,{rollback:(0,o.A)((0,o.A)({},e.rollback),{},{notes:s.target.value})})})]})]})]},e.key))]}):(0,r.jsxs)("div",{className:"rounded-lg border bg-white p-8 text-gray-600",children:["Create or select a project on the left to manage the"," ",(0,r.jsx)("strong",{children:"Deployment guide"}),"."]})}},{key:"issues",title:"Issues faced",comp:function(){return(0,r.jsx)(_,{sectionKey:"issues",placeholder:"List blockers, risks, mitigations, lessons learned\u2026"})}},{key:"pocs",title:"Proof of concepts",comp:function(){return(0,r.jsx)(_,{sectionKey:"pocs",placeholder:"Proofs of concept: approach, outcomes, code pointers\u2026"})}},{key:"screenshots",title:"Screenshots",comp:function(){return(0,r.jsx)(_,{sectionKey:"screenshots",placeholder:"Paste image links or Markdown images to showcase UI & flows."})}},{key:"revenue",title:"Revenue",comp:function(){return(0,r.jsx)(_,{sectionKey:"revenue",placeholder:"Revenue projections, pricing, CAC/LTV notes\u2026"})}},{key:"value",title:"Immediate value",comp:function(){return(0,r.jsx)(_,{sectionKey:"value",placeholder:"Immediate value, success metrics, stakeholder impact\u2026"})}},{key:"maintenance",title:"Maintenance",comp:function(){return(0,r.jsx)(_,{sectionKey:"maintenance",placeholder:"Oncall, SLAs, runbooks, monitoring, alerting, upgrade paths\u2026"})}},{key:"demand",title:"Demand",comp:function(){return(0,r.jsx)(_,{sectionKey:"demand",placeholder:"User demand, backlog, roadmap confidence, market signals\u2026"})}},{key:"tech",title:"Tech Requirements",comp:function(){return(0,r.jsx)(_,{sectionKey:"tech",placeholder:"Functional & non-functional requirements, SLOs, constraints\u2026"})}},{key:"releases",title:"Releases",comp:function(){return(0,r.jsx)(_,{sectionKey:"releases",placeholder:"Released versions, links to release notes, known issues\u2026"})}},{key:"ux",title:"UX",comp:function(){return(0,r.jsx)(_,{sectionKey:"ux",placeholder:"User journeys, wireframes, accessibility notes, UX rationale\u2026"})}},{key:"documents",title:"Documents",comp:function(){return(0,r.jsx)(_,{sectionKey:"documents",placeholder:"Add links to specs, design docs, spreadsheets, etc. (Markdown links)."})}}];function W(){return(0,r.jsx)(i.Yt,{children:(0,r.jsx)(J,{})})}function J(){var e,s;const[a,i]=(0,l.useState)(!1),[d,o]=(0,l.useState)(!1),[m,h]=(0,l.useState)(null),x=(0,l.useMemo)(()=>{const e=G.IG.get(G.Cx,"activeSection");return z.some(s=>s.key===e)?e:z[0].key},[]),[p,u]=(0,l.useState)(x),b=null!==(e=null===(s=z.find(e=>e.key===p))||void 0===s?void 0:s.comp)&&void 0!==e?e:j,{deleteProject:g,selected:y}=(0,t.A)();(0,l.useEffect)(()=>{G.IG.set(G.Cx,"activeSection",p)},[p]),(0,l.useEffect)(()=>{const e=()=>i(e=>!e);return window.addEventListener("app:toggleSidebar",e),()=>window.removeEventListener("app:toggleSidebar",e)},[]);const v=()=>{h(null),o(!1)};return(0,r.jsxs)("div",{className:"h-screen w-full flex flex-col bg-gray-50",children:[(0,r.jsx)("div",{className:"flex-1 min-h-0 w-full",children:(0,r.jsxs)("div",{className:"relative h-full w-full flex overflow-hidden",children:[(0,r.jsx)("div",{onClick:()=>i(!1),className:"lg:hidden fixed inset-0 z-20 bg-black/40 transition-opacity duration-300 ".concat(a?"opacity-100":"opacity-0 pointer-events-none")}),(0,r.jsx)("aside",{className:"\n              fixed lg:static inset-y-0 left-0 z-30 w-72 bg-gray-900 text-white\n              transform transition-transform duration-300 ease-in-out\n              border-r border-gray-800 overflow-y-auto shrink-0\n              ".concat(a?"translate-x-0":"-translate-x-full","\n              lg:translate-x-0 lg:transform-none\n            "),children:(0,r.jsx)("div",{className:"h-full p-4",children:(0,r.jsx)(n,{sections:z,activeKey:p,onSelect:e=>{u(e),G.IG.set(G.Cx,"activeSection",e),i(!1)},onConfirmDelete:e=>{h(e),o(!0)}})})}),(0,r.jsx)("main",{className:"flex-1 min-w-0 h-full overflow-auto",children:y?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)(b,{})})}):(0,r.jsx)(c.pp,{title:"Create your first project",description:(0,r.jsxs)(r.Fragment,{children:["Use the"," ",(0,r.jsx)("span",{className:"font-medium",children:"\u201cNew project name\u201d"})," ","field in the left sidebar to add a project. Once created, you can document sections like ",(0,r.jsx)("em",{children:"Setup"}),","," ",(0,r.jsx)("em",{children:"Architecture"}),", and more."]}),bullets:["Your projects list is shared with your board.","Select a section on the left to start documenting.",(0,r.jsxs)(r.Fragment,{children:["Deleting here only clears ",(0,r.jsx)("em",{children:"Project Hub"})," data for that project."]})]})})]})}),(0,r.jsxs)(Q.A,{isOpen:d,onClose:v,title:"Delete project?",children:[(0,r.jsx)("p",{className:"text-gray-700",children:"Clear Project Hub data for \u201c".concat((null===m||void 0===m?void 0:m.name)||"this project","\u201d? This removes only the Hub sections (Setup, Architecture, etc.). Your project, board columns and tasks remain intact.")}),(0,r.jsxs)("div",{className:"flex justify-between space-x-3 mt-6",children:[(0,r.jsx)("button",{onClick:v,className:"px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{m&&g(m.id),v()},className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})]})}function X(){return(0,r.jsx)(i.Yt,{children:(0,r.jsx)(W,{})})}},6041:(e,s,a)=>{a.d(s,{A:()=>t});a(5043);var l=a(579);const t=e=>{let{isOpen:s,onClose:a,title:t,children:r,className:n="bg-white rounded-xl shadow-lg p-6",closeOnBackdrop:i=!0}=e;return s?(0,l.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:i?a:void 0}),(0,l.jsx)("div",{className:"absolute left-1/2 top-20 -translate-x-1/2 w-full max-w-lg",children:(0,l.jsxs)("div",{className:"relative bg-white rounded-xl shadow-lg max-h-[90vh] md:max-h-[80vh] overflow-y-auto ".concat(n),role:"dialog","aria-modal":!0,children:[t&&(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:t}),(0,l.jsx)("button",{"aria-label":"Close modal",onClick:a,className:"rounded p-1 hover:bg-gray-100",children:"\u2715"})]}),r]})})]}):null}},7002:(e,s,a)=>{a.d(s,{A:()=>t});var l=a(9930);function t(){const e=(0,l.vw)();if(!e)throw new Error("useProjectHub must be used within ProjectHubProvider");return e}},7893:(e,s,a)=>{a.d(s,{pp:()=>r,aF:()=>l.A});var l=a(6041),t=(a(5107),a(4024),a(9453),a(5043),a(7002),a(579));a(3198),a(1497);const r=e=>{let{title:s,description:a,bullets:l,action:r,className:n="rounded-xl border bg-white p-8"}=e;return(0,t.jsxs)("div",{className:n,children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:s}),a&&(0,t.jsx)("div",{className:"mt-2 text-gray-600 text-sm",children:a}),null!==l&&void 0!==l&&l.length?(0,t.jsx)("ul",{className:"mt-3 list-disc pl-5 space-y-1 text-sm text-gray-700",children:l.map((e,s)=>(0,t.jsx)("li",{children:e},s))}):null,r&&(0,t.jsx)("div",{className:"mt-4",children:r})]})}},9453:(e,s,a)=>{a.d(s,{A:()=>r});var l=a(5043),t=a(579);const r=e=>{let{value:s,className:a}=e;const[r,n]=(0,l.useState)(!1);return(0,t.jsxs)("div",{className:["inline-flex items-center gap-2",a].join(" "),children:[(0,t.jsx)("code",{className:"rounded bg-gray-100 px-2 py-1",children:r?s:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,t.jsx)("button",{type:"button",onClick:()=>n(e=>!e),className:"text-xs rounded border px-2 py-1 hover:bg-gray-50",children:r?"Hide":"Show"})]})}},9930:(e,s,a)=>{a.d(s,{Yt:()=>h,vw:()=>m});var l=a(9379),t=a(5043),r=a(8424),n=a(579);const i="projects",c="selectedProjectId";function d(e){r.IG.set(r.Cx,i,e)}const o=(0,t.createContext)(void 0),m=()=>(0,t.useContext)(o);function h(e){let{children:s}=e;const[a,m]=(0,t.useState)([]),[h,x]=(0,t.useState)(null),p=()=>m(r.IG.get(r.Cx,i,[]));(0,t.useEffect)(()=>{p(),x(r.IG.get(r.Cx,c,null))},[]),(0,t.useEffect)(()=>{h?r.IG.set(r.Cx,c,h):r.IG.remove(r.Cx,c)},[h]);const u=(0,t.useMemo)(()=>a.find(e=>e.id===h)||null,[a,h]),b={projects:a,selected:u,selectedId:h,setSelectedId:x,selectProject:e=>x(e),addProject:e=>{const s=(e||"").trim();if(!s)return null;if(a.some(e=>e.name.toLowerCase()===s.toLowerCase()))return null;const l="".concat(s.toLowerCase().replace(/\s+/g,"-"),"-").concat(Date.now()),t={id:l,name:s,sections:{}},r=[...a,t];return m(r),d(r),x(l),t},deleteProject:e=>{const s=a.filter(s=>s.id!==e);m(s),d(s),h===e&&x(null)},updateSection:(e,s)=>{if(!h)return;const t=a.map(a=>a.id!==h?a:(0,l.A)((0,l.A)({},a),{},{sections:(0,l.A)((0,l.A)({},a.sections||{}),{},{[e]:s})}));m(t),d(t)},refresh:p};return(0,n.jsx)(o.Provider,{value:b,children:s})}}}]);
//# sourceMappingURL=498.f9615fa7.chunk.js.map