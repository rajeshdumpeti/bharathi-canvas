"use strict";(self.webpackChunkmy_app_=self.webpackChunkmy_app_||[]).push([[97],{7097:(e,t,s)=>{s.r(t),s.d(t,{default:()=>T});var r=s(9379),l=s(5043),a=s(5352),o=s(579);const n=e=>{let{projects:t,selectedProject:s,onSelectProject:r,onAddProject:n,onToggleSidebar:i,tasks:d,onConfirmDeleteProject:c}=e;const[u,x]=(0,l.useState)(""),m=(0,a.Zp)(),p=(0,a.zy)().pathname.startsWith("/board/features"),h=d.filter(e=>s&&e.project===s.id),g=h.filter(e=>"to-do"===e.status).length,b=h.filter(e=>"in-progress"===e.status).length,f=h.filter(e=>"done"===e.status).length,j=h.length,y=j>0?Math.round(f/j*100):0,v=(0,l.useMemo)(()=>(new Date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),[]);return(0,o.jsxs)("div",{className:"flex h-full min-h-0 flex-col pt-2 transition-all duration-300",children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,o.jsx)("h3",{className:"text-xl font-bold",children:"Projects"}),(0,o.jsx)("button",{onClick:i,className:"rounded-lg p-2 transition-colors hover:bg-gray-700 lg:hidden","aria-label":"Close sidebar",children:(0,o.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,o.jsxs)("div",{className:"mb-4 inline-flex rounded-lg bg-gray-800/70 p-1",children:[(0,o.jsx)("button",{className:"px-3 py-1 rounded ".concat(p?"bg-gray-700":"bg-blue-600 text-white"),onClick:()=>{const e=(null===s||void 0===s?void 0:s.id)||"";m("/board".concat(e?"?project=".concat(e):""))},children:"Board"}),(0,o.jsx)("button",{className:"px-3 py-1 rounded ".concat(p?"bg-blue-600 text-white":"bg-gray-700"),onClick:()=>{const e=(null===s||void 0===s?void 0:s.id)||"";m("/board/features".concat(e?"?project=".concat(e):""))},children:"Features"})]})]}),(0,o.jsx)("ul",{className:"custom-scrollbar mb-6 max-h-full min-h-0 flex-1 space-y-2 overflow-y-auto pr-2",children:0===t.length?(0,o.jsx)("li",{className:"select-none rounded-lg bg-gray-800/70 p-2 text-sm text-gray-300",children:"Your project goes here"}):t.map(e=>(0,o.jsxs)("li",{className:"flex cursor-pointer items-center justify-between rounded-lg p-2 transition-colors ".concat((null===s||void 0===s?void 0:s.id)===e.id?"bg-blue-600 text-white":"hover:bg-gray-700"),onClick:()=>{r(e);m("".concat(p?"/board/features":"/board","?project=").concat(e.id)),i()},children:[(0,o.jsx)("span",{className:"flex-1 pr-2",children:e.name}),(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),c(e)},className:"rounded-full p-1 text-gray-400 transition-colors hover:text-red-500",title:"Delete Project","aria-label":"Delete project ".concat(e.name),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.id))}),(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=(u||"").trim();if(!s)return;t.some(e=>e.name.trim().toLowerCase()===s.toLowerCase())||(n(s),x(""))},className:"mb-6 space-y-2",children:[(0,o.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),placeholder:"New project name",className:"w-full rounded-lg bg-gray-700 p-2 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,o.jsx)("button",{type:"submit",disabled:!u.trim(),className:"w-full rounded-lg py-2 font-semibold transition ".concat(u.trim()?"bg-blue-600 text-white hover:bg-blue-700":"cursor-not-allowed bg-gray-600 text-gray-300"),children:"Add"})]}),(0,o.jsxs)("div",{className:"rounded-lg bg-gray-800 p-4",children:[(0,o.jsx)("h4",{className:"mb-2 font-semibold",children:"Dashboard"}),(0,o.jsxs)("p",{className:"mb-1 text-sm",children:["Total Tasks: ",(0,o.jsx)("span",{className:"font-bold",children:j})]}),(0,o.jsxs)("ul",{className:"mb-2 space-y-1 text-xs",children:[(0,o.jsxs)("li",{children:["To Do: ",g]}),(0,o.jsxs)("li",{children:["In Progress: ",b]}),(0,o.jsxs)("li",{children:["Done: ",f]})]}),(0,o.jsxs)("p",{className:"text-sm font-semibold",children:["Progress: ",y,"% Done"]}),(0,o.jsx)("div",{className:"mt-2 h-2.5 w-full rounded-full bg-gray-700",children:(0,o.jsx)("div",{className:"h-2.5 rounded-full bg-blue-600",style:{width:"".concat(y,"%")}})}),(0,o.jsx)("p",{className:"mt-4 text-xs text-gray-400",children:v})]})]})};var i=s(7893),d=s(8424),c=s(5772);const u={High:"border-l-4 border-red-500",Medium:"border-l-4 border-yellow-500",Low:"border-l-4 border-green-500"},x=e=>{let{task:t,onDragStart:s,onEdit:r,onDelete:l}=e;return(0,o.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-sm cursor-grab ".concat(u[t.priority]," transition-transform duration-200 hover:scale-[1.02]"),draggable:!0,onDragStart:s,onClick:r,children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[t.storyId&&(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-blue-50 text-blue-700",children:t.storyId}),t.architecture&&(0,o.jsx)("span",{className:"inline-block px-2 py-0.5 text-xs font-semibold rounded-full bg-gray-200 text-gray-700",children:t.architecture})]}),l&&(0,o.jsx)("button",{type:"button","aria-label":"Delete story",className:"p-1.5 rounded hover:bg-red-50 text-gray-400 hover:text-red-600",onClick:e=>{e.stopPropagation(),l(t.id)},children:(0,o.jsx)(c.IXo,{className:"h-4 w-4"})})]}),(0,o.jsx)("h4",{className:"font-semibold text-gray-900",children:t.title}),t.description&&(0,o.jsx)("p",{className:"text-sm text-gray-600 break-words whitespace-pre-line mb-3",children:t.description}),(0,o.jsxs)("div",{className:"space-y-1 text-xs text-gray-500 mb-2",children:[(0,o.jsx)("p",{children:t.assignee?"Assigned to: ".concat(String(t.assignee)):"Unassigned"}),t.createdAt&&(0,o.jsxs)("p",{children:["Created on: ",t.createdAt]}),t.dueDate&&(0,o.jsxs)("p",{children:["Complete by: ",t.dueDate]})]})]})},m=e=>{let{title:t,id:s,tasks:r,onAddTask:l,onDrop:a,onDragOver:n,onDragStart:i,onEditTask:d,onConfirmDeleteTask:u,onConfirmDeleteColumn:m}=e;const p=r.filter(e=>e.status===s);return(0,o.jsxs)("div",{className:"flex-1 min-w-[280px] max-w-xs bg-gray-100 rounded-xl p-4 m-2 shadow-md transition-all duration-300 transform hover:shadow-xl md:flex-grow-0 md:min-w-[300px]",onDragOver:n,onDrop:e=>a(e,s),children:[(0,o.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,o.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:[t," (",p.length,")"]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("button",{onClick:()=>l(s),"aria-label":"Add task to ".concat(t),className:"p-1.5 rounded-full bg-blue-200 text-blue-600 hover:bg-blue-300 transition-colors",type:"button",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,o.jsx)("button",{onClick:()=>m(s),"aria-label":"Delete ".concat(t," column"),className:"p-1.5 rounded hover:bg-red-50 text-gray-400 hover:text-red-600",type:"button",title:"Delete column",children:(0,o.jsx)(c.IXo,{className:"h-4 w-4"})})]})]}),(0,o.jsx)("div",{className:"flex flex-col space-y-3 overflow-y-auto",style:{scrollbarWidth:"thin",scrollbarColor:"#E2E8F0 #F7FAFC"},children:0===p.length?(0,o.jsx)("div",{className:"text-sm text-gray-500 italic py-6 text-center select-none",children:"No tasks here yet \u2014 click the \u2795 to add one."}):p.map(e=>(0,o.jsx)(x,{task:e,onDragStart:t=>i(t,e.id),onEdit:()=>d(e),onDelete:u},e.id))})]})};var p=s(4858);function h(e){if(!e)return(new Date).toLocaleDateString("en-GB");try{return new Date(e).toLocaleDateString("en-GB")}catch(t){return e}}function g(e){var t,s,l,a,n,i,d,c,u,x;let{task:m,onSave:g,onCancel:b,features:f=[],initialFeatureId:j}=e;const{register:y,handleSubmit:v,formState:{errors:w,isSubmitting:N}}=(0,p.mN)({defaultValues:{title:null!==(t=m.title)&&void 0!==t?t:"",description:null!==(s=m.description)&&void 0!==s?s:"",acceptanceCriteria:null!==(l=m.acceptanceCriteria)&&void 0!==l?l:"",assignee:null!==(a=m.assignee)&&void 0!==a?a:"",priority:null!==(n=m.priority)&&void 0!==n?n:"Low",architecture:null!==(i=m.architecture)&&void 0!==i?i:"FE",createdAt:null!==(d=m.createdAt)&&void 0!==d?d:(C=new Date,C.toISOString().slice(0,10)),dueDate:null!==(c=m.dueDate)&&void 0!==c?c:"",id:m.id,project:m.project,status:m.status,storyId:m.storyId,featureId:null!==(u=null!==(x=m.featureId)&&void 0!==x?x:j)&&void 0!==u?u:""}});var C;return(0,o.jsxs)("form",{onSubmit:v(e=>{var t,s,l,a,o;g((0,r.A)((0,r.A)({},e),{},{id:null!==(t=m.id)&&void 0!==t?t:e.id,project:null!==(s=m.project)&&void 0!==s?s:e.project,status:null!==(l=m.status)&&void 0!==l?l:e.status,storyId:null!==(a=m.storyId)&&void 0!==a?a:e.storyId,featureId:null!==(o=e.featureId)&&void 0!==o?o:m.featureId}))}),className:"p-6",children:[(0,o.jsx)("div",{className:"mb-5",children:(0,o.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-indigo-50 text-indigo-700 border border-indigo-100 px-3 py-1 text-sm font-medium",children:[(0,o.jsx)("span",{children:"User Story"}),(0,o.jsx)("span",{className:"font-semibold",children:m.storyId?m.storyId:"Will be assigned on save"})]})}),(0,o.jsxs)("div",{className:"space-y-5",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:["Choose Feature ",(0,o.jsx)("span",{className:"text-rose-600",children:"*"})]}),(0,o.jsxs)("select",(0,r.A)((0,r.A)({},y("featureId",{required:f.length>0&&"Feature is required"})),{},{"aria-invalid":w.featureId?"true":"false",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 transition-all\n              ".concat(w.featureId?"border-rose-400 focus:ring-rose-500":"border-gray-300 focus:ring-blue-500"),children:[(0,o.jsx)("option",{value:"",disabled:!0,children:"\u2014 Select a feature \u2014"}),f.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]})),w.featureId&&(0,o.jsx)("p",{className:"mt-1 text-xs text-rose-600",children:String(w.featureId.message)}),0===f.length&&(0,o.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["No features found for this project. Add one in the",(0,o.jsx)("span",{className:"font-medium",children:" Features"})," tab first."]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Title"}),(0,o.jsx)("input",(0,r.A)((0,r.A)({},y("title",{required:"Title is required"})),{},{type:"text",placeholder:"Task Title",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})),w.title&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:w.title.message})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Technology"}),(0,o.jsxs)("select",(0,r.A)((0,r.A)({},y("architecture")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",children:[(0,o.jsx)("option",{value:"FE",children:"Frontend"}),(0,o.jsx)("option",{value:"BE",children:"Backend"}),(0,o.jsx)("option",{value:"DB",children:"Database"}),(0,o.jsx)("option",{value:"ARCH",children:"Architecture"}),(0,o.jsx)("option",{value:"MISC",children:"Miscellaneous"})]}))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Acceptance Criteria"}),(0,o.jsx)("textarea",(0,r.A)((0,r.A)({},y("acceptanceCriteria")),{},{placeholder:"As a user, I want..., so that...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"}))]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Description"}),(0,o.jsx)("textarea",(0,r.A)((0,r.A)({},y("description")),{},{placeholder:"Detailed description...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"}))]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Assignee"}),(0,o.jsx)("input",(0,r.A)((0,r.A)({},y("assignee",{required:"Assignee is required"})),{},{type:"text",placeholder:"Assignee Name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"})),w.assignee&&(0,o.jsx)("p",{className:"mt-1 text-xs text-red-600",children:w.assignee.message})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Priority"}),(0,o.jsxs)("select",(0,r.A)((0,r.A)({},y("priority")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",children:[(0,o.jsx)("option",{value:"High",children:"High"}),(0,o.jsx)("option",{value:"Medium",children:"Medium"}),(0,o.jsx)("option",{value:"Low",children:"Low"})]}))]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Created on"}),(0,o.jsx)("p",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:h(m.createdAt)}),(0,o.jsx)("input",(0,r.A)({type:"hidden"},y("createdAt")))]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Complete by"}),(0,o.jsx)("input",(0,r.A)((0,r.A)({type:"date"},y("dueDate")),{},{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"}))]})]})]}),(0,o.jsxs)("div",{className:"flex justify-between space-x-4 mt-6",children:[(0,o.jsx)("button",{type:"button",onClick:b,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",disabled:N,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold disabled:opacity-60",children:"Save Task"})]})]})}const b=e=>{let{onSave:t,onCancel:s}=e;const[r,a]=(0,l.useState)("");return(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(r)},className:"p-6",children:[(0,o.jsx)("h3",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Add New Column"}),(0,o.jsx)("div",{className:"space-y-4",children:(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-gray-700 text-sm font-semibold mb-2",children:"Column Title"}),(0,o.jsx)("input",{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"e.g., Backlog",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all",required:!0})]})}),(0,o.jsxs)("div",{className:"flex justify-between space-x-4 mt-6",children:[(0,o.jsx)("button",{type:"button",onClick:s,className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold",children:"Add Column"})]})]})};var f=s(7734);const j=[{id:"to-do",title:"To Do"},{id:"in-progress",title:"In Progress"},{id:"validation",title:"Validation"},{id:"done",title:"Done"}];function y(){const[e]=(0,a.ok)(),[t,s]=(0,l.useState)([]),[n,c]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[p,h]=(0,l.useState)(null),[y,v]=(0,l.useState)(!1),[w,N]=(0,l.useState)(!1),[C,k]=(0,l.useState)(!1),[I,S]=(0,l.useState)(!1),[A,D]=(0,l.useState)(!1),[E,L]=(0,l.useState)(null),[P,R]=(0,l.useState)(null),[T,G]=(0,l.useState)(null),[U,F]=(0,l.useState)(null),[O,B]=(0,l.useState)(!0),M=(0,l.useRef)(null),q=(0,l.useRef)({}),V=e=>{M.current&&M.current.scrollBy({left:e,behavior:"smooth"})};(0,l.useEffect)(()=>{const e=()=>{const e=d.IG.get(d.lR,"tasks",[]);s(e)};return window.addEventListener("storage",e),window.addEventListener("board:projectsUpdated",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("board:projectsUpdated",e)}},[]),(0,l.useEffect)(()=>{B(!0);try{const e=d.IG.get(d.lR,"projects",[]),t=d.IG.get(d.lR,"tasks",[]),l=new Set(["to-do","in-progress","validation","done"]),a=(t||[]).map(e=>(0,r.A)((0,r.A)({},e),{},{status:l.has(String(e.status))?e.status:"to-do"}));c(e),s(a),JSON.stringify(t)!==JSON.stringify(a)&&d.IG.set(d.lR,"tasks",a)}finally{B(!1)}},[]),(0,l.useEffect)(()=>{const e=()=>{const e=d.IG.get(d.lR,"projects",[]),t=d.IG.get(d.lR,"tasks",[]);c(e),s(t)};return window.addEventListener("storage",e),window.addEventListener("board:projectsUpdated",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("board:projectsUpdated",e)}},[]),(0,l.useEffect)(()=>{const t=e.get("project")||null,s=d.IG.get(d.lR,"selectedProjectId",null),r=null!==t&&void 0!==t?t:s,l=n.find(e=>e.id===r)||n[0]||null;h(l),x((null===l||void 0===l?void 0:l.columns)||[]),l?d.IG.set(d.lR,"selectedProjectId",l.id):d.IG.remove(d.lR,"selectedProjectId")},[e,n]);const z=(e,t)=>{e.dataTransfer.setData("taskId",t)},K=e=>e.preventDefault(),W=(e,l)=>{e.preventDefault();const a=e.dataTransfer.getData("taskId"),o=(new Date).toISOString(),n=t.map(e=>{var t;if(e.id!==a)return e;const s="done"===e.status,n="done"===l;return(0,r.A)((0,r.A)({},e),{},{status:l,completedAt:n&&!s?o:null!==(t=e.completedAt)&&void 0!==t?t:null})});s(n),d.IG.set(d.lR,"tasks",n);const i=t.find(e=>e.id===a);if(null!==i&&void 0!==i&&i.storyId){const e="to-do"===l?"To Do":"in-progress"===l?"In Progress":"validation"===l?"Validation":"Done";(0,f.m2)(i.storyId,e)}},_=e=>{if(!p)return;const t=e&&"object"===typeof e&&("nativeEvent"in e||"target"in e)?"to-do":"string"===typeof e?e:"to-do";F({id:"temp-".concat(Date.now()),status:t,title:"",description:"",assignee:"",priority:"Low",architecture:"FE",project:p.id,acceptanceCriteria:""}),v(!0)},H=e=>{F(e),v(!0)},J=e=>{L(e),k(!0)},X=e=>{R(e),S(!0)},Y=e=>{const t=d.IG.get(d.lR,"storySeq",{}),s=Number(t[e]||234567),r="US".concat(s);return t[e]=s+1,d.IG.set(d.lR,"storySeq",t),r};return(0,o.jsxs)("div",{className:"h-full w-full flex flex-col bg-gray-50 font-sans text-gray-800",children:[(0,o.jsx)("div",{className:"flex-1 min-h-0 w-full",children:(0,o.jsx)("div",{className:"relative h-full w-full flex overflow-hidden",children:(0,o.jsx)("main",{className:"flex-1 min-w-0 h-full overflow-auto",children:(0,o.jsxs)("div",{className:"h-full flex flex-col",children:[(0,o.jsx)("div",{className:"bg-white border-b",children:p&&(0,o.jsxs)("div",{className:"mx-auto w-full max-w-7xl flex flex-col sm:flex-row sm:items-center sm:justify-between py-2 px-2 gap-3",children:[(0,o.jsxs)("div",{className:"flex w-full justify-between sm:justify-start sm:gap-2",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"".concat(p.name," Project")}),(0,o.jsx)("button",{onClick:()=>_("to-do"),className:"rounded-md bg-blue-600 px-3 py-1.5 text-sm text-white hover:bg-blue-700",children:"Create Story"})]}),(0,o.jsxs)("div",{className:"flex w-full justify-between sm:justify-end sm:gap-2",children:[(0,o.jsx)(a.N_,{to:"stories",className:"rounded-md border px-2 py-1 text-sm hover:bg-gray-50",title:"View all stories",children:"US LookUp"}),(0,o.jsx)("button",{onClick:()=>p&&N(!0),disabled:!p,className:"rounded-md border px-2 py-1 text-sm ".concat(p?"bg-green-500 text-white hover:bg-green-600":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:"Add Column"}),(0,o.jsx)("button",{onClick:()=>p&&(G(p),void D(!0)),className:"rounded-md border px-2 py-1 text-sm text-rose-700 hover:bg-rose-50",title:"Delete this project",children:"Delete Project"})]})]})}),O?(0,o.jsx)("div",{className:"flex-1 flex items-center justify-center text-xl text-gray-600",children:"Loading board..."}):p?(0,o.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col",children:[(0,o.jsx)("div",{className:"bg-white border-b sticky top-0 z-10",children:(0,o.jsxs)("div",{className:"mx-auto w-full max-w-7xl flex items-center gap-3 py-2",children:[(0,o.jsx)("button",{"aria-label":"Scroll left",onClick:()=>V(-320),className:"".concat(u.length>1?"flex":"hidden"," h-8 w-8 shrink-0 items-center justify-center rounded-full border bg-white hover:bg-gray-50"),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M12.293 15.707a1 1 0 010-1.414L8.414 10l3.879-4.293a1 1 0 10-1.586-1.414l-5 5a1 1 0 000 1.414l5 5a1 1 0 001.586-1.414z",clipRule:"evenodd"})})}),(0,o.jsx)("div",{className:"relative flex-1 overflow-hidden",children:(0,o.jsx)("div",{className:"flex gap-2 overflow-x-auto tabs-scrollbar",children:u.map(e=>(0,o.jsx)("button",{onClick:()=>(e=>{const t=q.current[e];if(!t||!M.current)return;const s=M.current,r=t.offsetLeft-16;s.scrollTo({left:r,behavior:"smooth"})})(e.id),className:"px-3 py-1.5 rounded-full text-sm border bg-gray-50 hover:bg-white hover:shadow-sm whitespace-nowrap",children:e.title},"tab-".concat(e.id)))})}),(0,o.jsx)("button",{"aria-label":"Scroll right",onClick:()=>V(320),className:"".concat(u.length>1?"flex":"hidden"," h-8 w-8 shrink-0 items-center justify-center rounded-full border bg-white hover:bg-gray-50"),children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M7.707 4.293a1 1 0 010 1.414L11.586 10l-3.879 4.293a1 1 0 101.586 1.414l5-5a1 1 0 000-1.414l-5-5a1 1 0 00-1.586 0z",clipRule:"evenodd"})})})]})}),(0,o.jsx)("div",{className:"flex-1 min-h-0",children:(0,o.jsx)("div",{ref:M,className:"mx-auto w-full max-w-7xl h-full px-4 py-2 overflow-x-auto overflow-y-visible board-scrollbar",children:(0,o.jsx)("div",{className:"flex flex-row gap-2 pb-6",children:u.map(e=>{return(0,o.jsx)("div",{ref:(s=e.id,e=>{q.current[s]=e}),className:"min-w-[320px] max-w-[360px]",children:(0,o.jsx)(m,{id:e.id,title:e.title,tasks:t.filter(e=>p&&e.project===p.id),onAddTask:_,onDrop:W,onDragOver:K,onDragStart:z,onEditTask:H,onConfirmDeleteTask:J,onConfirmDeleteColumn:X})},"wrap-".concat(e.id));var s})})})})]}):(0,o.jsx)(i.pp,{title:"Create your first project",description:(0,o.jsxs)(o.Fragment,{children:["Create a project in the left sidebar. We\u2019ll add default columns (",(0,o.jsx)("em",{children:"To Do"}),", ",(0,o.jsx)("em",{children:"In Progress"}),","," ",(0,o.jsx)("em",{children:"Validation"}),", ",(0,o.jsx)("em",{children:"Done"}),")."]}),bullets:["Projects live in the left panel.","Click a project to open its board.","Use \u201cAdd Column\u201d to customize the workflow."]})]})})})}),(0,o.jsx)(i.aF,{isOpen:y,onClose:()=>v(!1),title:U&&U.id?"Edit Story":"New Story",className:"bg-white rounded-xl shadow-lg p-6",children:(0,o.jsx)(g,{task:U||{id:"temp-".concat(Date.now()),title:"",description:"",assignee:"",priority:"Low",architecture:"FE",project:(null===p||void 0===p?void 0:p.id)||"",status:"to-do"},onSave:e=>{if(!p)return;const l=!e.id||e.id.startsWith("temp-"),a=(0,r.A)((0,r.A)({},e),{},{id:l?"task-".concat(Date.now()):e.id,project:p.id,storyId:e.storyId||(l?Y(p.id):e.storyId),acceptanceCriteria:e.acceptanceCriteria||""}),o=l?[...t,a]:t.map(e=>e.id===a.id?(0,r.A)({},a):e);var n;(s(o),d.IG.set(d.lR,"tasks",o),"string"===typeof e.featureId&&e.featureId)&&(0,f.ro)({id:a.id,project:a.project,storyId:a.storyId,title:a.title,status:a.status,assignee:a.assignee,priority:a.priority,createdAt:a.createdAt,completedAt:null!==(n=a.completedAt)&&void 0!==n?n:null,acceptanceCriteria:a.acceptanceCriteria},e.featureId);v(!1),F(null)},onCancel:()=>v(!1),features:p?(0,f.gx)(p.id).map(e=>({id:e.id,name:e.name})):[],initialFeatureId:void 0})}),(0,o.jsx)(i.aF,{isOpen:w,onClose:()=>N(!1),title:"Add Column",className:"bg-white rounded-xl shadow-lg p-6",children:(0,o.jsx)(b,{onSave:e=>{if(!e||!p)return;const t=[...u,{id:e.toLowerCase().replace(/\s+/g,"-"),title:e}];x(t);const s=n.map(e=>e.id===p.id?(0,r.A)((0,r.A)({},e),{},{columns:t}):e);c(s),d.IG.set(d.lR,"projects",s),N(!1),window.dispatchEvent(new Event("board:projectsUpdated"))},onCancel:()=>N(!1)})}),(0,o.jsxs)(i.aF,{isOpen:C,onClose:()=>k(!1),title:"Confirm Delete",className:"bg-white rounded-xl shadow-lg p-6",children:[(0,o.jsx)("p",{className:"text-gray-700",children:"Are you sure you want to delete this task?"}),(0,o.jsxs)("div",{className:"flex justify-between space-x-4 mt-6",children:[(0,o.jsx)("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>{if(!E)return;const e=t.find(e=>e.id===E),r=t.filter(e=>e.id!==E);s(r),d.IG.set(d.lR,"tasks",r),null!==e&&void 0!==e&&e.storyId&&(0,f.V5)(e.storyId),k(!1),L(null)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]}),(0,o.jsxs)(i.aF,{isOpen:I,onClose:()=>S(!1),title:"Confirm Delete",className:"bg-white rounded-xl shadow-lg p-6",children:[(0,o.jsx)("p",{className:"text-gray-700",children:"Are you sure you want to delete this column and all its tasks? This action cannot be undone."}),(0,o.jsxs)("div",{className:"flex justify-between space-x-4 mt-6",children:[(0,o.jsx)("button",{onClick:()=>S(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>{if(!p||!P)return;const e=(u||[]).filter(e=>e.id!==P),l=t.filter(e=>e.status!==P);x(e),s(l);const a=n.map(t=>t.id===p.id?(0,r.A)((0,r.A)({},t),{},{columns:e}):t);c(a),d.IG.set(d.lR,"projects",a),d.IG.set(d.lR,"tasks",l),S(!1),R(null),window.dispatchEvent(new Event("board:projectsUpdated"))},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]}),(0,o.jsxs)(i.aF,{isOpen:A,onClose:()=>D(!1),title:"Confirm Delete Project",className:"bg-white rounded-xl shadow-lg p-6",children:[(0,o.jsxs)("p",{className:"text-gray-700",children:['Are you sure you want to delete the project "',null===T||void 0===T?void 0:T.name,'"? This will permanently delete all associated tasks.']}),(0,o.jsxs)("div",{className:"flex justify-between space-x-4 mt-6",children:[(0,o.jsx)("button",{onClick:()=>D(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"}),(0,o.jsx)("button",{onClick:()=>{if(!T)return;const e=n.filter(e=>e.id!==T.id),r=t.filter(e=>e.project!==T.id);c(e),s(r),d.IG.set(d.lR,"projects",e),d.IG.set(d.lR,"tasks",r);const l=e[0]||null;h(l),x((null===l||void 0===l?void 0:l.columns)||j),l?d.IG.set(d.lR,"selectedProjectId",l.id):d.IG.remove(d.lR,"selectedProjectId"),D(!1),G(null),window.dispatchEvent(new Event("board:projectsUpdated"))},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Delete"})]})]})]})}var v=s(5531),w=s(1389),N=s(4857);const C={"to-do":"To Do","in-progress":"In Progress",validation:"Validation",done:"Done"};function k(e){if(!e)return"\u2014";try{return new Date(e).toISOString().slice(0,10)}catch(t){return"\u2014"}}function I(e){const t=(null!==e&&void 0!==e?e:"").toString();return/[",\n]/.test(t)?'"'.concat(t.replace(/"/g,'""'),'"'):t}function S(e,t){const{headers:s,rows:r}=function(e){return{headers:["Story ID","Title","Status","Assignee","Priority","Created At","Completed At"],rows:e.map(e=>{var t;return[e.storyId||"",e.title||"",C[null!==(t=e.status)&&void 0!==t?t:""]||e.status||"",e.assignee||"",e.priority||"",k(e.createdAt),k(e.completedAt)]})}}(t),l=[s.map(I).join(","),...r.map(e=>e.map(I).join(","))],a=new Blob([l.join("\n")],{type:"text/csv;charset=utf-8"}),o=URL.createObjectURL(a),n=document.createElement("a");n.href=o,n.download=e,n.click(),URL.revokeObjectURL(o)}const A=e=>{let{project:t,items:s}=e;const r=(null===t||void 0===t?void 0:t.name)||"All Projects",a=(0,l.useMemo)(()=>{const e=(new Date).toISOString().slice(0,10),t=r.toLowerCase().replace(/[^\w]+/g,"-");return{csv:"".concat(t,"-").concat(e,"-stories.csv"),pdf:"".concat(t,"-").concat(e,"-stories.pdf")}},[r]);return(0,o.jsxs)("div",{className:"flex items-center gap-2 justify-end ",children:[(0,o.jsxs)("button",{onClick:()=>S(a.csv,s),className:"rounded-md border px-2 py-1 text-sm hover:bg-gray-50",title:"Exports the currently filtered list to CSV",children:[(0,o.jsx)(c.a4x,{})," Export CSV"]}),(0,o.jsx)("button",{onClick:()=>function(e,t,s){const r=new w.Ay({unit:"pt",format:"a4"}),l=t?"User Stories \u2014 Project ".concat(t):"User Stories",a="As of ".concat((new Date).toLocaleString());r.setFontSize(14),r.text(l,40,40),r.setFontSize(10),r.text(a,40,58);const o=[{header:"Story ID",dataKey:"storyId"},{header:"Title",dataKey:"title"},{header:"Status",dataKey:"statusLabel"},{header:"Assignee",dataKey:"assignee"},{header:"Priority",dataKey:"priority"},{header:"Created",dataKey:"createdAt"},{header:"Completed",dataKey:"completedAt"}],n=s.map(e=>{var t;return{storyId:e.storyId||"",title:e.title||"",statusLabel:C[null!==(t=e.status)&&void 0!==t?t:""]||e.status||"",assignee:e.assignee||"",priority:e.priority||"",createdAt:k(e.createdAt),completedAt:k(e.completedAt)}});(0,N.Ay)(r,{startY:70,head:[o.map(e=>e.header)],body:n.map(e=>o.map(t=>e[t.dataKey])),styles:{fontSize:9,cellPadding:6,overflow:"linebreak"},headStyles:{fillColor:[33,33,33]},margin:{left:40,right:40}}),r.save(e)}(a.pdf,r,s),className:"px-2 py-1 rounded bg-blue-600 text-white hover:bg-blue-700",title:"Exports the currently filtered list to PDF",children:"Export PDF"})]})},D=[{id:"to-do",label:"To Do"},{id:"in-progress",label:"In Progress"},{id:"validation",label:"Validation"},{id:"done",label:"Done"}],E={"to-do":"bg-gray-100 text-gray-700","in-progress":"bg-blue-100 text-blue-700",validation:"bg-amber-100 text-amber-700",done:"bg-green-100 text-green-700"};function L(e,t){try{const s=d.IG.get(d.lR,e,t);return null!==s&&void 0!==s?s:t}catch(s){return t}}function P(){const[e,t]=(0,l.useState)(()=>L("tasks",[])),[s,r]=(0,l.useState)(()=>L("projects",[])),[n,i]=(0,l.useState)(()=>L("selectedProjectId","")),[d,c]=(0,l.useState)(""),[u,x]=(0,l.useState)("all");(0,l.useEffect)(()=>{t(L("tasks",[])),r(L("projects",[])),i(L("selectedProjectId",""))},[]);const m=(0,l.useMemo)(()=>{const t=(d||"").toLowerCase();return e.filter(e=>{if(n&&e.project!==n)return!1;if("all"!==u&&e.status!==u)return!1;if(!t)return!0;return"".concat(e.storyId||""," ").concat(e.title||""," ").concat(e.assignee||""," ").concat(e.acceptanceCriteria||"").toLowerCase().includes(t)}).sort((e,t)=>(e.storyId||"").localeCompare(t.storyId||""))},[e,d,u,n]);return(0,o.jsxs)("div",{className:"h-full w-full flex flex-col bg-gray-50",children:[(0,o.jsx)("div",{className:"bg-white border-b",children:(0,o.jsxs)("div",{className:"mx-auto w-full max-w-7xl flex items-center justify-between py-4",children:[(0,o.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"User Stories"}),(0,o.jsx)(a.N_,{to:"/board",className:"px-3 py-1.5 rounded border bg-white hover:bg-gray-50 text-gray-700",children:"Back to Board"})]})}),(0,o.jsx)("div",{className:"flex-1 overflow-auto",children:(0,o.jsxs)("div",{className:"mx-auto w-full max-w-7xl p-6 space-y-4",children:[(0,o.jsx)(A,{project:s.find(e=>e.id===n)||null,items:m}),(0,o.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 items-stretch md:items-center",children:[(0,o.jsx)("input",{value:d,onChange:e=>c(e.target.value),placeholder:"Search by title, user story ID and Name ",className:"flex-1 rounded border px-3 py-2"}),(0,o.jsxs)("select",{value:u,onChange:e=>x(e.target.value),className:"rounded border px-3 py-2",children:[(0,o.jsx)("option",{value:"all",children:"All statuses"}),D.map(e=>(0,o.jsx)("option",{value:e.id,children:e.label},e.id))]}),(0,o.jsxs)("select",{value:n||"",onChange:e=>i(e.target.value),className:"rounded border px-3 py-2",children:[(0,o.jsx)("option",{value:"",children:"All projects"}),s.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,o.jsx)("div",{className:"overflow-auto rounded border bg-white",children:(0,o.jsxs)("table",{className:"min-w-full text-sm",children:[(0,o.jsx)("thead",{className:"bg-gray-50 text-gray-600",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"text-left p-3 w-28",children:"Story ID"}),(0,o.jsx)("th",{className:"text-left p-3",children:"Title"}),(0,o.jsx)("th",{className:"text-left p-3",children:"Assignee"}),(0,o.jsx)("th",{className:"text-left p-3 w-40",children:"Status"}),(0,o.jsx)("th",{className:"text-left p-3",children:"Priority"}),(0,o.jsx)("th",{className:"text-left p-3 w-44",children:"Created"})]})}),(0,o.jsx)("tbody",{children:0===m.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:6,className:"p-6 text-center text-gray-500",children:"No stories match."})}):m.map(e=>(0,o.jsxs)("tr",{className:"border-t",children:[(0,o.jsx)("td",{className:"p-3 font-mono text-blue-700",children:e.storyId||"\u2014"}),(0,o.jsx)("td",{className:"p-3",children:(0,o.jsx)("div",{className:"font-medium text-gray-900",children:e.title||"Untitled"})}),(0,o.jsx)("td",{className:"p-3",children:e.assignee||"\u2014"}),(0,o.jsx)("td",{className:"p-3",children:(t=>{const s=(null===(t=D.find(t=>t.id===e.status))||void 0===t?void 0:t.label)||e.status||"\u2014",r=E[e.status||""]||"bg-gray-200 text-gray-800";return(0,o.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium ".concat(r),children:s})})()}),(0,o.jsx)("td",{className:"p-3",children:e.priority||"\u2014"}),(0,o.jsx)("td",{className:"p-3",children:(e.createdAt||"").slice(0,10)||"\u2014"})]},e.id))})]})})]})})]})}const R=[{id:"to-do",title:"To Do"},{id:"in-progress",title:"In Progress"},{id:"validation",title:"Validation"},{id:"done",title:"Done"}];function T(){var e,t;const[s]=(0,a.ok)(),[i,c]=(0,l.useState)(!1),[u,x]=(0,l.useState)(()=>b()),[m,p]=(0,l.useState)(()=>f());(0,l.useEffect)(()=>{const e=()=>c(e=>!e);return window.addEventListener("app:toggleSidebar",e),()=>window.removeEventListener("app:toggleSidebar",e)},[]);const h=s.get("project")||"";function g(e,t){try{const s=d.IG.get(d.lR,e,t);return null!==s&&void 0!==s?s:t}catch(s){return t}}function b(){return g("projects",[]).map(e=>({id:e.id,name:e.name,columns:Array.isArray(e.columns)&&e.columns.length?e.columns:[...R]}))}function f(){return g("tasks",[])}(0,l.useEffect)(()=>{const e=()=>{x(b()),p(f())};return window.addEventListener("storage",e),window.addEventListener("board:projectsUpdated",e),()=>{window.removeEventListener("storage",e),window.removeEventListener("board:projectsUpdated",e)}},[]);const j=null!==(e=null!==(t=u.find(e=>e.id===h))&&void 0!==t?t:u.find(e=>e.id===g("selectedProjectId","")))&&void 0!==e?e:null,w={projects:u,selectedProject:j,onSelectProject:e=>{d.IG.set(d.lR,"selectedProjectId",e.id)},isSidebarOpen:i,onToggleSidebar:()=>c(e=>!e),tasks:m,onAddProject:e=>{const t=[...u,{id:"proj_".concat(Date.now()),name:e,columns:[...R]}];x(t),d.IG.set(d.lR,"projects",t),window.dispatchEvent(new Event("board:projectsUpdated"))},onConfirmDeleteProject:e=>{const t=u.filter(t=>t.id!==e.id);x(t),d.IG.set(d.lR,"projects",t);g("selectedProjectId","")===e.id&&d.IG.set(d.lR,"selectedProjectId",""),window.dispatchEvent(new Event("board:projectsUpdated"))},onOpenDocuments:()=>{}};return(0,o.jsxs)("div",{className:"flex h-full min-h-0 w-full",children:[(0,o.jsx)("div",{onClick:()=>c(!1),className:"lg:hidden fixed inset-0 z-20 bg-black/40 transition-opacity duration-300 ".concat(i?"opacity-100":"opacity-0 pointer-events-none")}),(0,o.jsx)("aside",{className:"fixed lg:static inset-y-0 left-0 z-30 w-64 bg-gray-900 text-white\n      border-r border-gray-800 overflow-y-auto transform transition-transform duration-300 ease-in-out\n      ".concat(i?"translate-x-0":"-translate-x-full"," lg:translate-x-0 lg:transform-none"),children:(0,o.jsx)("div",{className:"h-full p-4",children:(0,o.jsx)(n,(0,r.A)({},w))})}),(0,o.jsx)("main",{className:"min-w-0 flex-1",children:(0,o.jsxs)(a.BV,{children:[(0,o.jsx)(a.qh,{index:!0,element:(0,o.jsx)(y,{})}),(0,o.jsx)(a.qh,{path:"features",element:(0,o.jsx)(v.default,{})}),(0,o.jsx)(a.qh,{path:"stories",element:(0,o.jsx)(P,{})}),(0,o.jsx)(a.qh,{path:"*",element:(0,o.jsx)(a.C5,{to:"/board",replace:!0})})]})})]})}}}]);
//# sourceMappingURL=97.a6b15674.chunk.js.map