"use strict";(self.webpackChunkmy_app_=self.webpackChunkmy_app_||[]).push([[380],{4024:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(5043),n=s(579);const r=e=>{let{value:t,onChange:s,placeholder:r="Add and press Enter",className:l="",dedupe:o=!0}=e;const[c,i]=(0,a.useState)(""),d=(0,a.useRef)(null),u=e=>{const a=e.split(/[,;]/g).map(e=>e.trim()).filter(Boolean);if(!a.length)return;const n=new Set(t),r=o?[...new Set([...t,...a])]:[...t,...a];(r.length!==t.length||a.some(e=>!n.has(e)))&&s(r),i("")};return(0,n.jsxs)("div",{className:["flex flex-wrap gap-2 rounded border bg-white px-2 py-2",l].join(" "),onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.focus()},children:[t.map((e,a)=>(0,n.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-800",children:[e,(0,n.jsx)("button",{type:"button","aria-label":"Remove ".concat(e),className:"rounded p-0.5 hover:bg-gray-200",onClick:()=>(e=>{var a;const n=t.filter((t,s)=>s!==e);s(n),null===(a=d.current)||void 0===a||a.focus()})(a),children:"\u2715"})]},"".concat(e,"-").concat(a))),(0,n.jsx)("input",{ref:d,value:c,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),u(c)):"Backspace"===e.key&&!c&&t.length?s(t.slice(0,-1)):","!==e.key&&";"!==e.key||(e.preventDefault(),u(c))},onBlur:()=>(e=>{const a=e.trim();if(!a)return;const n=o?Array.from(new Set([...t,a])):[...t,a];s(n),i("")})(c),placeholder:t.length?"":r,className:"min-w-[8ch] flex-1 outline-none text-sm placeholder:text-gray-400 bg-transparent"})]})}},4380:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(5043),n=s(579);const r=e=>{let{projects:t=[],selectedProjectId:s,onSelectProject:a,fromDate:r,toDate:l,onChangeFrom:o,onChangeTo:c,grouping:i,onChangeGrouping:d,onGenerate:u,releases:m=[],onLoadRelease:x}=e;return(0,n.jsxs)("div",{className:"h-full p-4 space-y-6 text-white",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Project"}),(0,n.jsxs)("select",{value:s||"",onChange:e=>a(e.target.value),className:"w-full rounded-md bg-gray-800 border border-gray-700 p-2 text-sm",children:[(0,n.jsx)("option",{value:"",children:"Select a project\u2026"}),t.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Date range"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsx)("input",{type:"date",value:r,onChange:e=>o(e.target.value),className:"rounded-md bg-gray-800 border border-gray-700 p-2 text-sm"}),(0,n.jsx)("input",{type:"date",value:l,onChange:e=>c(e.target.value),className:"rounded-md bg-gray-800 border border-gray-700 p-2 text-sm"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Group by"}),(0,n.jsxs)("select",{value:i,onChange:e=>d(e.target.value),className:"w-full rounded-md bg-gray-800 border border-gray-700 p-2 text-sm",children:[(0,n.jsx)("option",{value:"type",children:"Change type (Feature/Fix/\u2026)"}),(0,n.jsx)("option",{value:"label",children:"First label"})]})]}),(0,n.jsx)("button",{onClick:u,disabled:!s,title:s?"Generate release notes":"Select a project first",className:"w-full px-4 py-2 rounded-lg font-semibold ".concat(s?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:"Generate"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-semibold mb-2 mt-4",children:"Previous releases"}),0===m.length?(0,n.jsx)("p",{className:"text-gray-400 text-sm",children:"No saved releases."}):(0,n.jsx)("ul",{className:"space-y-1 max-h-48 overflow-auto pr-1",children:m.slice().reverse().map(e=>(0,n.jsxs)("li",{className:"flex items-center justify-between px-2 py-1.5 rounded-md hover:bg-gray-800 text-sm cursor-pointer",onClick:()=>x(e),title:e.version,children:[(0,n.jsx)("span",{className:"truncate",children:e.version}),(0,n.jsx)("span",{className:"text-gray-400 ml-2",children:new Date(e.date).toLocaleDateString()})]},e.id))})]})]})},l=e=>{let{version:t,setVersion:s,notesMd:a,setNotesMd:r,onCopy:l,onDownload:o,onSave:c}=e;return(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsx)("div",{className:"bg-white border-b",children:(0,n.jsxs)("div",{className:"mx-auto w-full max-w-7xl flex items-center justify-between py-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("label",{className:"text-sm text-gray-600",children:"Version"}),(0,n.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),className:"rounded-md border border-gray-300 p-2 text-sm",placeholder:"v1.0.0"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{onClick:l,className:"px-3 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-sm",children:"Copy MD"}),(0,n.jsx)("button",{onClick:o,className:"px-3 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-sm",children:"Download .md"}),(0,n.jsx)("button",{onClick:c,className:"px-3 py-2 rounded-md bg-green-600 hover:bg-green-700 text-white text-sm font-semibold",children:"Save Release"})]})]})}),(0,n.jsx)("div",{className:"flex-1 min-h-0",children:(0,n.jsxs)("div",{className:"mx-auto w-full max-w-7xl px-6 py-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"rounded-lg border bg-white p-3",children:[(0,n.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Markdown (editable)"}),(0,n.jsx)("textarea",{value:a,onChange:e=>r(e.target.value),className:"w-full h-[60vh] rounded-md border border-gray-300 p-2 font-mono text-sm"})]}),(0,n.jsxs)("div",{className:"rounded-lg border bg-white p-3",children:[(0,n.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Preview"}),(0,n.jsx)("pre",{className:"w-full h-[60vh] overflow-auto whitespace-pre-wrap text-sm",children:a})]})]})})]})},o={Features:"\u2728",Fixes:"\ud83d\udc1b",Improvements:"\u2699\ufe0f",Chores:"\ud83e\uddf9"};function c(e){var t;const s=(null!==(t=e.labels)&&void 0!==t?t:[]).map(e=>String(e).toLowerCase()),a=e=>s.some(t=>t.includes(e));return a("feature")||a("enhancement")||"High"===e.priority?"Features":a("bug")||a("fix")||a("hotfix")?"Fixes":a("perf")||a("refactor")||a("ux")||a("docs")?"Improvements":"Chores"}var i=s(8424),d=s(7893);const u=()=>(new Date).toISOString().slice(0,10),m=e=>{const t=new Date;return t.setDate(t.getDate()-e),t.toISOString().slice(0,10)},x=e=>(e||"release-notes").replace(/[^\w.-]+/g,"_"),g=()=>{const[e,t]=(0,a.useState)(()=>i.IG.get(i.lR,"projects",[])),[s,g]=(0,a.useState)(()=>i.IG.get(i.lR,"tasks",[])),[p,h]=(0,a.useState)(()=>i.IG.get(i.np,"releases",[])),[v,f]=(0,a.useState)(()=>i.IG.get(i.np,"selectedProjectId","")),[b,j]=(0,a.useState)(m(14)),[y,w]=(0,a.useState)(u()),[N,C]=(0,a.useState)("type"),[k,S]=(0,a.useState)([]),[I,D]=(0,a.useState)(""),[G,P]=(0,a.useState)("v0.1.0"),[L,R]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!v)return;const e=p.filter(e=>e.projectId===v);if(e.length>0){var t,a;const n=e[e.length-1],r=(n.tasks||[]).map(e=>s.find(t=>t.id===e)).filter(Boolean).some(e=>"Features"===c(e));P(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=(null!==e&&void 0!==e?e:"").replace(/^v/i,"").trim().split(".").map(e=>Number.parseInt(e,10));let[a,n,r]=[0,0,0];return 3===s.length&&s.every(Number.isFinite)&&([a,n,r]=s),t?(n+=1,r=0):r+=1,"v".concat(a,".").concat(n,".").concat(r)}(n.version,r)),j((null===(t=n.range)||void 0===t||null===(a=t.to)||void 0===a?void 0:a.slice(0,10))||m(14))}else P("v0.1.0"),j(m(14));w(u())},[v]),(0,a.useEffect)(()=>{const e=e=>{if(e&&e.storageArea===localStorage){if(e.key==="".concat(i.lR,":projects"))try{t(JSON.parse(e.newValue||"[]"))}catch(s){t([])}if(e.key==="".concat(i.lR,":tasks"))try{g(JSON.parse(e.newValue||"[]"))}catch(a){g([])}if(e.key==="".concat(i.np,":releases"))try{h(JSON.parse(e.newValue||"[]"))}catch(n){h([])}e.key==="".concat(i.np,":selectedProjectId")&&f(e.newValue||"")}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,a.useEffect)(()=>{i.IG.set(i.np,"releases",p)},[p]),(0,a.useEffect)(()=>{v?i.IG.set(i.np,"selectedProjectId",v):i.IG.remove(i.np,"selectedProjectId")},[v]);const F=(0,a.useMemo)(()=>v?s.filter(e=>e.project===v):[],[s,v]),E=(0,a.useMemo)(()=>{if(!b||!y)return[];const e=new Date("".concat(b,"T00:00:00")),t=new Date("".concat(y,"T23:59:59"));return F.filter(s=>{if("done"!==s.status)return!1;if(!s.completedAt)return!1;const a=new Date(s.completedAt);return a>=e&&a<=t})},[F,b,y]);(0,a.useEffect)(()=>{const e=()=>R(e=>!e);return window.addEventListener("app:toggleSidebar",e),()=>window.removeEventListener("app:toggleSidebar",e)},[]);const A=(0,a.useCallback)(()=>{S(E);const e=function(e){let{version:t,date:s,tasks:a,groupBy:n="type",emoji:r=o}=e;const l=new Map,i=(e,t)=>{var s;return l.set(e,[...null!==(s=l.get(e))&&void 0!==s?s:[],t])};for(const o of a){var d,u;i("label"===n?null!==(d=null===(u=o.labels)||void 0===u?void 0:u[0])&&void 0!==d?d:"Other":c(o),o)}return"## ".concat(function(e){const t=(e||"").trim();return/^v/i.test(t)?t:"v".concat(t)}(t)," \u2014 ").concat(s,"\n")+[...l.entries()].sort((e,t)=>{let[s]=e,[a]=t;return s.localeCompare(a)}).map(e=>{var t,s;let[a,n]=e;const l=null!==(t=null!==(s=r[a])&&void 0!==s?s:r[a])&&void 0!==t?t:"\u2022",o=n.slice().sort((e,t)=>{var s,a;return(null!==(s=e.title)&&void 0!==s?s:"").localeCompare(null!==(a=t.title)&&void 0!==a?a:"")}).map(e=>{const t=null!=e.id?" (".concat(String(e.id).replace(/^task-/,"#"),")"):"";return"- ".concat(l," ").concat(e.title||"(untitled)").concat(t)}).join("\n");return"\n### ".concat(a,"\n").concat(o,"\n")}).join("\n")+"\n"}({version:G,date:u(),tasks:E,groupBy:N});D(e)},[E,G,N]),O=(0,a.useCallback)(async()=>{try{await navigator.clipboard.writeText(I||"")}catch(e){console.warn("Clipboard failed, falling back to download",e);const t=new Blob([I||""],{type:"text/markdown;charset=utf-8"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="".concat(x(G),".md"),a.click(),URL.revokeObjectURL(s)}},[I,G]),M=(0,a.useCallback)(()=>{const e=new Blob([I||""],{type:"text/markdown;charset=utf-8"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="".concat(x(G),".md"),s.click(),URL.revokeObjectURL(t)},[I,G]),B=(0,a.useCallback)(()=>{if(!v)return;const e={id:"".concat(Date.now()),projectId:v,version:G||"v0.0.0",date:(new Date).toISOString(),range:{from:b,to:y},filters:{},grouping:N,notesMd:I||"",tasks:k.map(e=>e.id)};h(t=>[...t,e])},[v,G,b,y,N,I,k]),U=(0,a.useCallback)(e=>{var t,s,a,n;f(e.projectId),P(e.version),j((null===(t=e.range)||void 0===t||null===(s=t.from)||void 0===s?void 0:s.slice(0,10))||m(14)),w((null===(a=e.range)||void 0===a||null===(n=a.to)||void 0===n?void 0:n.slice(0,10))||u()),D(e.notesMd||"")},[]);return(0,n.jsx)("div",{className:"h-full w-full flex flex-col bg-gray-50",children:(0,n.jsx)("div",{className:"flex-1 min-h-0 w-full",children:(0,n.jsxs)("div",{className:"relative h-full w-full flex overflow-hidden",children:[(0,n.jsx)("div",{onClick:()=>R(!1),className:"lg:hidden fixed inset-0 z-20 bg-black/40 transition-opacity duration-300 ".concat(L?"opacity-100":"opacity-0 pointer-events-none")}),(0,n.jsx)("aside",{className:"\n              fixed lg:static inset-y-0 left-0 z-30 w-72 bg-gray-900 text-white\n              transform transition-transform duration-300 ease-in-out\n              border-r border-gray-800 overflow-y-auto shrink-0\n              ".concat(L?"translate-x-0":"-translate-x-full","\n              lg:translate-x-0 lg:transform-none\n            "),children:(0,n.jsx)(r,{projects:e,selectedProjectId:v,onSelectProject:f,fromDate:b,toDate:y,onChangeFrom:j,onChangeTo:w,grouping:N,onChangeGrouping:C,onGenerate:A,releases:p.filter(e=>e.projectId===v),onLoadRelease:U})}),v?(0,n.jsx)("main",{className:"flex-1 min-w-0 h-full overflow-auto",children:(0,n.jsx)(l,{version:G,setVersion:P,notesMd:I,setNotesMd:D,onCopy:O,onDownload:M,onSave:B})}):(0,n.jsx)(d.pp,{title:"Create your first release",description:(0,n.jsxs)(n.Fragment,{children:["Use the ",(0,n.jsx)("span",{className:"font-medium",children:"Project"})," picker on the left to choose a project. Then set a date range and click"," ",(0,n.jsx)("span",{className:"font-medium",children:"Generate"}),". We\u2019ll create editable Markdown and show a live preview here."]}),bullets:[(0,n.jsx)(n.Fragment,{children:"Group items by Feature / Fix / Chore, etc."}),(0,n.jsxs)(n.Fragment,{children:["Edit Markdown, copy it, or download as ",(0,n.jsx)("code",{children:".md"}),"."]}),(0,n.jsx)(n.Fragment,{children:"Click \u201cSave Release\u201d to store it locally for later."})]})]})})})};function p(){return(0,n.jsx)(g,{})}},5107:(e,t,s)=>{s.d(t,{A:()=>n});s(5043);var a=s(579);const n=e=>{let{children:t,onClick:s,type:n="button",className:r="",title:l,disabled:o}=e;return(0,a.jsx)("button",{type:n,title:l,disabled:o,onClick:s,className:["inline-flex items-center gap-1 rounded border px-3 py-1.5 text-sm","bg-white hover:bg-gray-50 text-gray-700","disabled:opacity-60 disabled:cursor-not-allowed",r].join(" "),children:t})}},6041:(e,t,s)=>{s.d(t,{A:()=>n});s(5043);var a=s(579);const n=e=>{let{isOpen:t,onClose:s,title:n,children:r,className:l="bg-white rounded-xl shadow-lg p-6",closeOnBackdrop:o=!0}=e;return t?(0,a.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:o?s:void 0}),(0,a.jsx)("div",{className:"absolute left-1/2 top-20 -translate-x-1/2 w-full max-w-lg",children:(0,a.jsxs)("div",{className:"relative bg-white rounded-xl shadow-lg max-h-[90vh] md:max-h-[80vh] overflow-y-auto ".concat(l),role:"dialog","aria-modal":!0,children:[n&&(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:n}),(0,a.jsx)("button",{"aria-label":"Close modal",onClick:s,className:"rounded p-1 hover:bg-gray-100",children:"\u2715"})]}),r]})})]}):null}},7002:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(9930);function n(){const e=(0,a.vw)();if(!e)throw new Error("useProjectHub must be used within ProjectHubProvider");return e}},7893:(e,t,s)=>{s.d(t,{pp:()=>r,aF:()=>a.A});var a=s(6041),n=(s(5107),s(4024),s(9453),s(5043),s(7002),s(579));s(3198),s(1497);const r=e=>{let{title:t,description:s,bullets:a,action:r,className:l="rounded-xl border bg-white p-8"}=e;return(0,n.jsxs)("div",{className:l,children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:t}),s&&(0,n.jsx)("div",{className:"mt-2 text-gray-600 text-sm",children:s}),null!==a&&void 0!==a&&a.length?(0,n.jsx)("ul",{className:"mt-3 list-disc pl-5 space-y-1 text-sm text-gray-700",children:a.map((e,t)=>(0,n.jsx)("li",{children:e},t))}):null,r&&(0,n.jsx)("div",{className:"mt-4",children:r})]})}},8424:(e,t,s)=>{s.d(t,{Cx:()=>n,IG:()=>i,_w:()=>r,lR:()=>a,np:()=>l,xj:()=>o});const a="board",n="hub",r="docs",l="releaseNotes",o="ideas",c=(e,t)=>"".concat(e,":").concat(t);const i={get:function(e,t,s){try{const a=localStorage.getItem(c(e,t));return null==a?null!==s&&void 0!==s?s:null:JSON.parse(a)}catch(a){return null!==s&&void 0!==s?s:null}},set(e,t,s){localStorage.setItem(c(e,t),JSON.stringify(s))},remove(e,t){localStorage.removeItem(c(e,t))},clear(e){const t="".concat(e,":");for(let s=localStorage.length-1;s>=0;s--){const e=localStorage.key(s);e&&e.startsWith(t)&&localStorage.removeItem(e)}}}},9453:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(5043),n=s(579);const r=e=>{let{value:t,className:s}=e;const[r,l]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:["inline-flex items-center gap-2",s].join(" "),children:[(0,n.jsx)("code",{className:"rounded bg-gray-100 px-2 py-1",children:r?t:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,n.jsx)("button",{type:"button",onClick:()=>l(e=>!e),className:"text-xs rounded border px-2 py-1 hover:bg-gray-50",children:r?"Hide":"Show"})]})}},9930:(e,t,s)=>{s.d(t,{Yt:()=>m,vw:()=>u});var a=s(9379),n=s(5043),r=s(8424),l=s(579);const o="projects",c="selectedProjectId";function i(e){r.IG.set(r.Cx,o,e)}const d=(0,n.createContext)(void 0),u=()=>(0,n.useContext)(d);function m(e){let{children:t}=e;const[s,u]=(0,n.useState)([]),[m,x]=(0,n.useState)(null),g=()=>u(r.IG.get(r.Cx,o,[]));(0,n.useEffect)(()=>{g(),x(r.IG.get(r.Cx,c,null))},[]),(0,n.useEffect)(()=>{m?r.IG.set(r.Cx,c,m):r.IG.remove(r.Cx,c)},[m]);const p=(0,n.useMemo)(()=>s.find(e=>e.id===m)||null,[s,m]),h={projects:s,selected:p,selectedId:m,setSelectedId:x,selectProject:e=>x(e),addProject:e=>{const t=(e||"").trim();if(!t)return null;if(s.some(e=>e.name.toLowerCase()===t.toLowerCase()))return null;const a="".concat(t.toLowerCase().replace(/\s+/g,"-"),"-").concat(Date.now()),n={id:a,name:t,sections:{}},r=[...s,n];return u(r),i(r),x(a),n},deleteProject:e=>{const t=s.filter(t=>t.id!==e);u(t),i(t),m===e&&x(null)},updateSection:(e,t)=>{if(!m)return;const n=s.map(s=>s.id!==m?s:(0,a.A)((0,a.A)({},s),{},{sections:(0,a.A)((0,a.A)({},s.sections||{}),{},{[e]:t})}));u(n),i(n)},refresh:g};return(0,l.jsx)(d.Provider,{value:h,children:t})}}}]);
//# sourceMappingURL=380.07527024.chunk.js.map