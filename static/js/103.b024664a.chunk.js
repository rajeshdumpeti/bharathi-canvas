"use strict";(self.webpackChunkmy_app_=self.webpackChunkmy_app_||[]).push([[103],{4024:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(5043),r=n(579);const l=e=>{let{value:t,onChange:n,placeholder:l="Add and press Enter",className:a="",dedupe:o=!0}=e;const[c,i]=(0,s.useState)(""),d=(0,s.useRef)(null),u=e=>{const s=e.split(/[,;]/g).map(e=>e.trim()).filter(Boolean);if(!s.length)return;const r=new Set(t),l=o?[...new Set([...t,...s])]:[...t,...s];(l.length!==t.length||s.some(e=>!r.has(e)))&&n(l),i("")};return(0,r.jsxs)("div",{className:["flex flex-wrap gap-2 rounded border bg-white px-2 py-2",a].join(" "),onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.focus()},children:[t.map((e,s)=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-800",children:[e,(0,r.jsx)("button",{type:"button","aria-label":"Remove ".concat(e),className:"rounded p-0.5 hover:bg-gray-200",onClick:()=>(e=>{var s;const r=t.filter((t,n)=>n!==e);n(r),null===(s=d.current)||void 0===s||s.focus()})(s),children:"\u2715"})]},"".concat(e,"-").concat(s))),(0,r.jsx)("input",{ref:d,value:c,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),u(c)):"Backspace"===e.key&&!c&&t.length?n(t.slice(0,-1)):","!==e.key&&";"!==e.key||(e.preventDefault(),u(c))},onBlur:()=>(e=>{const s=e.trim();if(!s)return;const r=o?Array.from(new Set([...t,s])):[...t,s];n(r),i("")})(c),placeholder:t.length?"":l,className:"min-w-[8ch] flex-1 outline-none text-sm placeholder:text-gray-400 bg-transparent"})]})}},5107:(e,t,n)=>{n.d(t,{A:()=>r});n(5043);var s=n(579);const r=e=>{let{children:t,onClick:n,type:r="button",className:l="",title:a,disabled:o}=e;return(0,s.jsx)("button",{type:r,title:a,disabled:o,onClick:n,className:["inline-flex items-center gap-1 rounded border px-3 py-1.5 text-sm","bg-white hover:bg-gray-50 text-gray-700","disabled:opacity-60 disabled:cursor-not-allowed",l].join(" "),children:t})}},6041:(e,t,n)=>{n.d(t,{A:()=>r});n(5043);var s=n(579);const r=e=>{let{isOpen:t,onClose:n,title:r,children:l,className:a="bg-white rounded-xl shadow-lg p-6",closeOnBackdrop:o=!0}=e;return t?(0,s.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:o?n:void 0}),(0,s.jsx)("div",{className:"absolute left-1/2 top-20 -translate-x-1/2 w-full max-w-lg",children:(0,s.jsxs)("div",{className:"relative bg-white rounded-xl shadow-lg max-h-[90vh] md:max-h-[80vh] overflow-y-auto ".concat(a),role:"dialog","aria-modal":!0,children:[r&&(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:r}),(0,s.jsx)("button",{"aria-label":"Close modal",onClick:n,className:"rounded p-1 hover:bg-gray-100",children:"\u2715"})]}),l]})})]}):null}},6103:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var s=n(5043),r=n(9379),l=n(6369),a=n(4131),o=n(4893),c=n(8424);const i={getItem:e=>{var t;return null!==(t=localStorage.getItem("".concat(c._w,":").concat(e)))&&void 0!==t?t:null},setItem:(e,t)=>localStorage.setItem("".concat(c._w,":").concat(e),t),removeItem:e=>localStorage.removeItem("".concat(c._w,":").concat(e))},d=(0,o.KU)(()=>i),u=["application/pdf","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],m=e=>/\.(pdf|txt|docx)$/i.test(e);function x(e){return new Promise((t,n)=>{const s=new FileReader;if("text/plain"===e.type||/\.txt$/i.test(e.name))return s.onload=()=>{var e;return t({kind:"txt",text:String(null!==(e=s.result)&&void 0!==e?e:"")})},s.onerror=n,void s.readAsText(e);s.onload=()=>{var e;return t({kind:"data",dataURL:String(null!==(e=s.result)&&void 0!==e?e:"")})},s.onerror=n,s.readAsDataURL(e)})}const p=(0,a.v)()((0,o.Zr)((e,t)=>({items:[],selectedId:null,pending:[],error:"",setSelected:t=>e(e=>e.selectedId===t?e:{selectedId:t}),clearSelectedIfDeleted:n=>{const{selectedId:s,items:r}=t();if(s===n){var l,a;const t=null!==(l=null===(a=r.find(e=>e.id!==n))||void 0===a?void 0:a.id)&&void 0!==l?l:null;e({selectedId:t})}},stageFiles:n=>{if(null===n||void 0===n||!n.length)return;const s=t().pending,r=e=>"".concat(e.name,"-").concat(e.size),l=new Set(s.map(r)),a=[...s];n.forEach(e=>{l.has(r(e))||a.push(e)}),e({pending:a,error:""})},clearPending:()=>e({pending:[]}),setError:t=>e({error:t}),clearError:()=>e({error:""}),addDocuments:async(n,s)=>{if(null!==n&&void 0!==n&&n.length){for(const t of n){if(t.size>5242880)return void e({error:'"'.concat(t.name,'" is larger than 5 MB.')});if(!u.includes(t.type)&&!m(t.name))return void e({error:'"'.concat(t.name,'" is not a supported type (PDF, DOCX, TXT).')})}try{var r,l,a;const o=(await Promise.all(n.map(x))).map((e,t)=>{var r;const l=n[t];return{id:"".concat(Date.now(),"-").concat(t,"-").concat(Math.random().toString(36).slice(2,7)),name:l.name,type:l.type||((null===(r=l.name.match(/\.(\w+)$/))||void 0===r?void 0:r[1])||"").toLowerCase(),size:l.size,createdAt:(new Date).toISOString(),dataURL:"data"===e.kind?e.dataURL:null,text:"txt"===e.kind?e.text:null,project:s}}),c=[...t().items,...o],i=null!==(r=null!==(l=t().selectedId)&&void 0!==l?l:null===(a=c[0])||void 0===a?void 0:a.id)&&void 0!==r?r:null;e({items:c,selectedId:i,pending:[],error:""})}catch(o){console.error(o),e({error:"Failed to read one or more files."})}}},deleteDocument:t=>e(e=>{var n,s;const r=e.items.filter(e=>e.id!==t.id),l=e.selectedId===t.id?null!==(n=null===(s=r[0])||void 0===s?void 0:s.id)&&void 0!==n?n:null:e.selectedId;return r===e.items&&l===e.selectedId?e:{items:r,selectedId:l}})}),{name:"".concat(c._w,":store"),version:1,storage:d,partialize:e=>({items:e.items,selectedId:e.selectedId})}));var h=n(579);const v=()=>{const e=p(e=>e.addDocuments),t=p(e=>e.items),n=(0,s.useMemo)(()=>{const e=new Set;return t.forEach(t=>{var n,s,r;const l=null!==(n=null===(s=t.project)||void 0===s||null===(r=s.trim)||void 0===r?void 0:r.call(s))&&void 0!==n?n:"";l&&e.add(l)}),Array.from(e).sort((e,t)=>e.localeCompare(t))},[t]),[r,l]=(0,s.useState)("");return(0,h.jsxs)("div",{className:"rounded-lg border border-gray-800 bg-gray-900 p-3",children:[(0,h.jsx)("h3",{className:"text-sm font-semibold text-gray-100",children:"Upload document"}),(0,h.jsxs)("div",{className:"mt-2",children:[(0,h.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Project"}),(0,h.jsxs)("select",{className:"w-full rounded-md bg-gray-800 border border-gray-700 px-2 py-1.5 text-sm text-gray-100",value:r||"Unassigned",onChange:e=>(e=>{if("__new__"===e){const e=window.prompt("New project name");if(!e)return;return void l(e.trim())}l("Unassigned"===e?"":e)})(e.target.value),children:[(0,h.jsx)("option",{value:"Unassigned",children:"Unassigned"}),n.map(e=>(0,h.jsx)("option",{value:e,children:e},e)),(0,h.jsx)("option",{value:"__new__",children:"\u2795 New project\u2026"})]})]}),(0,h.jsxs)("div",{className:"mt-3 grid gap-2",children:[(0,h.jsxs)("label",{className:"flex h-24 cursor-pointer items-center justify-center rounded-md border-2 border-dashed border-gray-700 bg-gray-800/50 text-gray-200 hover:border-gray-600",children:[(0,h.jsx)("input",{type:"file",accept:".pdf,.docx,.txt,application/pdf,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain",className:"hidden",multiple:!0,onChange:t=>(async t=>{t&&t.length&&e(Array.from(t),r)})(t.target.files)}),(0,h.jsxs)("div",{className:"text-center",children:[(0,h.jsx)("div",{className:"text-sm",children:"Drag & drop PDF / DOCX / TXT here"}),(0,h.jsxs)("div",{className:"text-[11px] text-gray-400",children:["Max ",5," MB each"]})]})]}),(0,h.jsx)("button",{onClick:()=>{var e,t;return null===(e=document.querySelector('input[type="file"]'))||void 0===e||null===(t=e.click)||void 0===t?void 0:t.call(e)},className:"inline-flex justify-center rounded-md bg-gray-800 px-3 py-2 text-sm text-gray-100 hover:bg-gray-700",children:"Browse files"})]})]})};const f=e=>{let{open:t}=e;return(0,h.jsx)("svg",{viewBox:"0 0 20 20",className:"h-4 w-4 transition-transform ".concat(t?"rotate-90":""),fill:"currentColor",children:(0,h.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 111.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})},g=e=>{let{documents:t,selectedId:n,onSelect:l,onConfirmDelete:a,projects:o,onRenameProject:c,onMoveDoc:i}=e;const d=(u=t,(0,s.useMemo)(()=>{const e=new Map;for(const t of u){const n="string"===typeof t.project&&t.project.trim()||"Unassigned";e.has(n)||e.set(n,[]),e.get(n).push(t)}return Array.from(e.entries()).sort((e,t)=>{let[n]=e,[s]=t;return"Unassigned"===n?1:"Unassigned"===s?-1:n.localeCompare(s)})},[u]));var u;const[m,x]=(0,s.useState)(()=>{const e={};return d.forEach(t=>{let[n]=t;return e[n]=!0}),e});return t.length?(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-sm font-semibold text-gray-100 mb-2",children:"Projects"}),(0,h.jsx)("div",{className:"space-y-2 overflow-y-auto max-h-[50vh] pr-1",children:d.map(e=>{var t;let[s,o]=e;const i=null===(t=m[s])||void 0===t||t,d="Unassigned"!==s;return(0,h.jsxs)("div",{className:"rounded-md border border-gray-800/60 bg-gray-900/50",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between px-2 py-2 rounded-t-md",children:[(0,h.jsxs)("button",{className:"flex items-center gap-2 text-left text-gray-100 truncate hover:opacity-90",onClick:()=>x(e=>(0,r.A)((0,r.A)({},e),{},{[s]:!i})),title:s,children:[(0,h.jsx)(f,{open:i}),(0,h.jsx)("span",{className:"truncate",children:s})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("span",{className:"text-xs text-gray-400",children:o.length}),d&&(0,h.jsx)("button",{className:"rounded px-1.5 py-0.5 text-xs bg-gray-800 hover:bg-gray-700",title:"Rename project",onClick:()=>{const e=window.prompt("Rename project",s);if(!e)return;const t=e.trim();t&&t!==s&&c(s,t)},children:"Rename"})]})]}),i&&(0,h.jsx)("ul",{className:"px-1 pb-1 space-y-1",children:o.map(e=>{return(0,h.jsxs)("li",{className:"flex items-center justify-between px-2 py-1.5 rounded-md cursor-pointer text-sm ".concat(n===e.id?"bg-blue-600 text-white":"hover:bg-gray-800 text-gray-100"),children:[(0,h.jsxs)("span",{onClick:()=>l(e.id),className:"flex-1 flex items-center gap-2 truncate pr-2",title:e.name,children:[(0,h.jsx)("span",{className:"shrink-0",children:(t=e,/pdf/i.test(t.type)||/\.pdf$/i.test(t.name)?"\ud83d\udcc4":/docx/i.test(t.type)||/\.docx$/i.test(t.name)?"\ud83d\udcdd":"\ud83d\udcc3")}),(0,h.jsx)("span",{className:"truncate",children:e.name})]}),(0,h.jsx)("div",{className:"flex items-center gap-1",children:(0,h.jsx)("button",{onClick:t=>{t.stopPropagation(),a(e)},className:"p-1 rounded ".concat(n===e.id?"hover:bg-blue-500/30":"hover:bg-gray-700"),title:"Delete","aria-label":"Delete",children:(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},e.id);var t})})]},s)})})]}):(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-sm font-semibold text-gray-100 mb-2",children:"Files"}),(0,h.jsx)("p",{className:"text-gray-400 text-sm",children:"No files yet."})]})};var j=n(7633);const y=e=>{let{dataURL:t,className:n="h-[70vh] overflow-auto rounded border bg-white p-4"}=e;const r=(0,s.useRef)(null),[l,a]=(0,s.useState)("");return(0,s.useEffect)(()=>{(async()=>{if(a(""),r.current&&t){r.current.innerHTML="Loading\u2026";try{const e=function(e){const t=e.split(",")[1]||e,n=atob(t),s=n.length,r=new Uint8Array(s);for(let l=0;l<s;l++)r[l]=n.charCodeAt(l);return r.buffer}(t),{value:n}=await j.convertToHtml({arrayBuffer:e},{includeDefaultStyleMap:!0,styleMap:["p[style-name='Heading 1'] => h1:fresh","p[style-name='Heading 2'] => h2:fresh"]});r.current.innerHTML=n||'<div style="color:#6b7280">Empty document</div>'}catch(e){console.error(e),a("Failed to render DOCX."),r.current.innerHTML=""}}})()},[t]),(0,h.jsxs)("div",{className:n,children:[l&&(0,h.jsx)("div",{className:"mb-2 text-sm text-red-600",children:l}),(0,h.jsx)("div",{ref:r,className:"prose max-w-none p-4"})]})};var b=n(7893);const w=()=>(0,h.jsx)(b.pp,{title:"Add your first document",description:(0,h.jsxs)(h.Fragment,{children:["Use the ",(0,h.jsx)("span",{className:"font-medium",children:"\u201cUpload Document\u201d"})," card in the left sidebar menu to add files. We\u2019ll store them locally and show a preview here."]}),bullets:[(0,h.jsxs)(h.Fragment,{children:["Supported types: ",(0,h.jsx)("code",{children:"PDF"}),", ",(0,h.jsx)("code",{children:"DOCX"}),", ",(0,h.jsx)("code",{children:"TXT"})," ","(max 5\xa0MB each)."]}),"Your documents will appear in the list on the left.","Click a document to open its preview on this page."]}),N=e=>{var t;let{doc:n}=e;if(!n)return(0,h.jsx)(w,{});const s=/pdf/i.test(n.type)||/\.pdf$/i.test(n.name),r=/text\/plain/i.test(n.type)||/\.txt$/i.test(n.name),l=/docx/i.test(n.type)||/\.docx$/i.test(n.name);return(0,h.jsxs)("div",{className:"rounded-lg border bg-white p-4",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,h.jsx)("h2",{className:"text-lg font-semibold truncate pr-4",children:n.name}),(0,h.jsxs)("div",{className:"text-xs text-gray-500",children:[(n.size/1024/1024).toFixed(2)," MB"]})]}),s&&n.dataURL&&(0,h.jsx)("iframe",{title:n.name,src:n.dataURL,className:"w-full h-[70vh] rounded border"}),r&&(0,h.jsx)("pre",{className:"w-full h-[70vh] overflow-auto bg-gray-50 p-4 rounded text-sm whitespace-pre-wrap",children:null!==(t=n.text)&&void 0!==t?t:"(empty file)"}),l&&n.dataURL&&(0,h.jsx)(y,{dataURL:n.dataURL,className:"h-[70vh] overflow-auto rounded border bg-white"}),l&&!n.dataURL&&(0,h.jsx)("div",{className:"p-6 text-center text-gray-600",children:"Preview not available."})]})};var C=n(3536);const k=()=>{const{documents:e,selectedId:t}=p((0,l.k)(e=>({documents:e.items,selectedId:e.selectedId}))),n=p(e=>e.setSelected),a=p(e=>e.deleteDocument),o=p(e=>e.setItems),c=(0,s.useMemo)(()=>{var n;return null!==(n=e.find(e=>e.id===t))&&void 0!==n?n:null},[e,t]),i=(0,s.useMemo)(()=>{const t=new Set;e.forEach(e=>{var n,s,r;const l=null!==(n=null===(s=e.project)||void 0===s||null===(r=s.trim)||void 0===r?void 0:r.call(s))&&void 0!==n?n:"";l&&t.add(l)});const n=Array.from(t).sort((e,t)=>e.localeCompare(t));return n.includes("Unassigned")||n.unshift("Unassigned"),n},[e]),[d,u]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1),[f,j]=(0,s.useState)(null);(0,s.useEffect)(()=>{const e=(0,C.debounce)(()=>{u(e=>!e)},250);return window.addEventListener("app:toggleSidebar",e),()=>{e.cancel(),window.removeEventListener("app:toggleSidebar",e)}},[]);return(0,h.jsx)("div",{className:"h-full w-full flex flex-col bg-gray-50",children:(0,h.jsx)("div",{className:"flex-1 min-h-0 w-full",children:(0,h.jsxs)("div",{className:"relative h-full w-full flex overflow-hidden",children:[(0,h.jsx)("div",{onClick:()=>u(!1),className:"lg:hidden fixed inset-0 z-20 bg-black/40 transition-opacity duration-300 ".concat(d?"opacity-100":"opacity-0 pointer-events-none")}),(0,h.jsx)("aside",{"aria-label":"Documents sidebar",className:"\n              fixed lg:static inset-y-0 left-0 z-30 w-72 bg-gray-900 text-white\n              border-r border-gray-800 overflow-y-auto shrink-0\n              transform transition-transform duration-300 ease-in-out\n              ".concat(d?"translate-x-0":"-translate-x-full","\n              lg:translate-x-0 lg:transform-none\n            "),children:(0,h.jsxs)("div",{className:"h-full p-4 space-y-6",children:[(0,h.jsx)(v,{}),(0,h.jsx)(g,{documents:e,selectedId:t,onSelect:e=>{n(e),window.innerWidth<1024&&u(!1)},onConfirmDelete:e=>{j(e),x(!0)},projects:i,onRenameProject:(t,n)=>{if(!o)return void console.warn("docs.store: add setItems([...]) action to enable rename.");const s=e.map(e=>{var s,l,a;return(null!==(s=null===(l=e.project)||void 0===l||null===(a=l.trim)||void 0===a?void 0:a.call(l))&&void 0!==s?s:"")===t?(0,r.A)((0,r.A)({},e),{},{project:n}):e});o(s)},onMoveDoc:(t,n)=>{if(!o)return void console.warn("docs.store: add setItems([...]) action to enable move.");const s=e.map(e=>e.id===t?(0,r.A)((0,r.A)({},e),{},{project:n}):e);o(s)}})]})}),(0,h.jsxs)("main",{className:"flex-1 min-w-0 h-full overflow-auto",children:[(0,h.jsxs)("div",{className:"h-full flex flex-col",children:[(0,h.jsx)("div",{className:"bg-white border-b",children:(0,h.jsxs)("div",{className:"mx-auto w-full max-w-7xl flex items-center justify-between py-4 px-4",children:[(0,h.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Documents"}),c&&(0,h.jsx)("div",{className:"hidden sm:block text-sm text-gray-500",children:c.project?"Project: ".concat(c.project):"Unassigned"})]})}),(0,h.jsx)("div",{className:"flex-1 overflow-auto",children:(0,h.jsx)(N,{doc:c})})]}),(0,h.jsxs)(b.aF,{isOpen:m,onClose:()=>{x(!1),j(null)},title:"Delete document?",children:[(0,h.jsx)("p",{className:"text-gray-700",children:"Are you sure you want to delete \u201c".concat((null===f||void 0===f?void 0:f.name)||"this file","\u201d? This action cannot be undone.")}),(0,h.jsxs)("div",{className:"flex justify-between space-x-3 mt-6",children:[(0,h.jsx)("button",{onClick:()=>{x(!1),j(null)},className:"px-4 py-2 rounded-lg bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),(0,h.jsx)("button",{onClick:()=>{f&&(a(f),t===f.id&&n(null),x(!1),j(null))},className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700",children:"Delete"})]})]})]})]})})})};function I(){return(0,h.jsx)(k,{})}},7002:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(9930);function r(){const e=(0,s.vw)();if(!e)throw new Error("useProjectHub must be used within ProjectHubProvider");return e}},7893:(e,t,n)=>{n.d(t,{pp:()=>l,aF:()=>s.A});var s=n(6041),r=(n(5107),n(4024),n(9453),n(5043),n(7002),n(579));n(3198),n(1497);const l=e=>{let{title:t,description:n,bullets:s,action:l,className:a="rounded-xl border bg-white p-8"}=e;return(0,r.jsxs)("div",{className:a,children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:t}),n&&(0,r.jsx)("div",{className:"mt-2 text-gray-600 text-sm",children:n}),null!==s&&void 0!==s&&s.length?(0,r.jsx)("ul",{className:"mt-3 list-disc pl-5 space-y-1 text-sm text-gray-700",children:s.map((e,t)=>(0,r.jsx)("li",{children:e},t))}):null,l&&(0,r.jsx)("div",{className:"mt-4",children:l})]})}},9453:(e,t,n)=>{n.d(t,{A:()=>l});var s=n(5043),r=n(579);const l=e=>{let{value:t,className:n}=e;const[l,a]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:["inline-flex items-center gap-2",n].join(" "),children:[(0,r.jsx)("code",{className:"rounded bg-gray-100 px-2 py-1",children:l?t:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,r.jsx)("button",{type:"button",onClick:()=>a(e=>!e),className:"text-xs rounded border px-2 py-1 hover:bg-gray-50",children:l?"Hide":"Show"})]})}},9930:(e,t,n)=>{n.d(t,{Yt:()=>m,vw:()=>u});var s=n(9379),r=n(5043),l=n(8424),a=n(579);const o="projects",c="selectedProjectId";function i(e){l.IG.set(l.Cx,o,e)}const d=(0,r.createContext)(void 0),u=()=>(0,r.useContext)(d);function m(e){let{children:t}=e;const[n,u]=(0,r.useState)([]),[m,x]=(0,r.useState)(null),p=()=>u(l.IG.get(l.Cx,o,[]));(0,r.useEffect)(()=>{p(),x(l.IG.get(l.Cx,c,null))},[]),(0,r.useEffect)(()=>{m?l.IG.set(l.Cx,c,m):l.IG.remove(l.Cx,c)},[m]);const h=(0,r.useMemo)(()=>n.find(e=>e.id===m)||null,[n,m]),v={projects:n,selected:h,selectedId:m,setSelectedId:x,selectProject:e=>x(e),addProject:e=>{const t=(e||"").trim();if(!t)return null;if(n.some(e=>e.name.toLowerCase()===t.toLowerCase()))return null;const s="".concat(t.toLowerCase().replace(/\s+/g,"-"),"-").concat(Date.now()),r={id:s,name:t,sections:{}},l=[...n,r];return u(l),i(l),x(s),r},deleteProject:e=>{const t=n.filter(t=>t.id!==e);u(t),i(t),m===e&&x(null)},updateSection:(e,t)=>{if(!m)return;const r=n.map(n=>n.id!==m?n:(0,s.A)((0,s.A)({},n),{},{sections:(0,s.A)((0,s.A)({},n.sections||{}),{},{[e]:t})}));u(r),i(r)},refresh:p};return(0,a.jsx)(d.Provider,{value:v,children:t})}}}]);
//# sourceMappingURL=103.b024664a.chunk.js.map