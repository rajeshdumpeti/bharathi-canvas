"use strict";(self.webpackChunkmy_app_=self.webpackChunkmy_app_||[]).push([[380],{4024:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(5043),a=s(579);const r=e=>{let{value:t,onChange:s,placeholder:r="Add and press Enter",className:l="",dedupe:o=!0}=e;const[c,i]=(0,n.useState)(""),d=(0,n.useRef)(null),u=e=>{const n=e.split(/[,;]/g).map(e=>e.trim()).filter(Boolean);if(!n.length)return;const a=new Set(t),r=o?[...new Set([...t,...n])]:[...t,...n];(r.length!==t.length||n.some(e=>!a.has(e)))&&s(r),i("")};return(0,a.jsxs)("div",{className:["flex flex-wrap gap-2 rounded border bg-white px-2 py-2",l].join(" "),onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.focus()},children:[t.map((e,n)=>(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-2 py-0.5 text-xs text-gray-800",children:[e,(0,a.jsx)("button",{type:"button","aria-label":"Remove ".concat(e),className:"rounded p-0.5 hover:bg-gray-200",onClick:()=>(e=>{var n;const a=t.filter((t,s)=>s!==e);s(a),null===(n=d.current)||void 0===n||n.focus()})(n),children:"\u2715"})]},"".concat(e,"-").concat(n))),(0,a.jsx)("input",{ref:d,value:c,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),u(c)):"Backspace"===e.key&&!c&&t.length?s(t.slice(0,-1)):","!==e.key&&";"!==e.key||(e.preventDefault(),u(c))},onBlur:()=>(e=>{const n=e.trim();if(!n)return;const a=o?Array.from(new Set([...t,n])):[...t,n];s(a),i("")})(c),placeholder:t.length?"":r,className:"min-w-[8ch] flex-1 outline-none text-sm placeholder:text-gray-400 bg-transparent"})]})}},4380:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var n=s(5043),a=s(579);const r=e=>{let{projects:t=[],selectedProjectId:s,onSelectProject:n,fromDate:r,toDate:l,onChangeFrom:o,onChangeTo:c,grouping:i,onChangeGrouping:d,onGenerate:u,releases:m=[],onLoadRelease:x}=e;return(0,a.jsxs)("div",{className:"h-full p-4 space-y-6 text-white",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Project"}),(0,a.jsxs)("select",{value:s||"",onChange:e=>n(e.target.value),className:"w-full rounded-md bg-gray-800 border border-gray-700 p-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"Select a project\u2026"}),t.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Date range"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsx)("input",{type:"date",value:r,onChange:e=>o(e.target.value),className:"rounded-md bg-gray-800 border border-gray-700 p-2 text-sm"}),(0,a.jsx)("input",{type:"date",value:l,onChange:e=>c(e.target.value),className:"rounded-md bg-gray-800 border border-gray-700 p-2 text-sm"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:"Group by"}),(0,a.jsxs)("select",{value:i,onChange:e=>d(e.target.value),className:"w-full rounded-md bg-gray-800 border border-gray-700 p-2 text-sm",children:[(0,a.jsx)("option",{value:"type",children:"Change type (Feature/Fix/\u2026)"}),(0,a.jsx)("option",{value:"label",children:"First label"})]})]}),(0,a.jsx)("button",{onClick:u,disabled:!s,title:s?"Generate release notes":"Select a project first",className:"w-full px-4 py-2 rounded-lg font-semibold ".concat(s?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"),children:"Generate"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2 mt-4",children:"Previous releases"}),0===m.length?(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"No saved releases."}):(0,a.jsx)("ul",{className:"space-y-1 max-h-48 overflow-auto pr-1",children:m.slice().reverse().map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between px-2 py-1.5 rounded-md hover:bg-gray-800 text-sm cursor-pointer",onClick:()=>x(e),title:e.version,children:[(0,a.jsx)("span",{className:"truncate",children:e.version}),(0,a.jsx)("span",{className:"text-gray-400 ml-2",children:new Date(e.date).toLocaleDateString()})]},e.id))})]})]})},l=e=>{let{version:t,setVersion:s,notesMd:n,setNotesMd:r,onCopy:l,onDownload:o,onSave:c}=e;return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"bg-white border-b",children:(0,a.jsxs)("div",{className:"mx-auto w-full max-w-7xl flex items-center justify-between px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("label",{className:"text-sm text-gray-600",children:"Version"}),(0,a.jsx)("input",{type:"text",value:t,onChange:e=>s(e.target.value),className:"rounded-md border border-gray-300 p-2 text-sm",placeholder:"v1.0.0"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:l,className:"px-3 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-sm",children:"Copy MD"}),(0,a.jsx)("button",{onClick:o,className:"px-3 py-2 rounded-md bg-gray-100 hover:bg-gray-200 text-sm",children:"Download .md"}),(0,a.jsx)("button",{onClick:c,className:"px-3 py-2 rounded-md bg-green-600 hover:bg-green-700 text-white text-sm font-semibold",children:"Save Release"})]})]})}),(0,a.jsx)("div",{className:"flex-1 min-h-0",children:(0,a.jsxs)("div",{className:"mx-auto w-full max-w-7xl px-6 py-4 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"rounded-lg border bg-white p-3",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Markdown (editable)"}),(0,a.jsx)("textarea",{value:n,onChange:e=>r(e.target.value),className:"w-full h-[60vh] rounded-md border border-gray-300 p-2 font-mono text-sm"})]}),(0,a.jsxs)("div",{className:"rounded-lg border bg-white p-3",children:[(0,a.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Preview"}),(0,a.jsx)("pre",{className:"w-full h-[60vh] overflow-auto whitespace-pre-wrap text-sm",children:n})]})]})})]})},o={Features:"\u2728",Fixes:"\ud83d\udc1b",Improvements:"\u2699\ufe0f",Chores:"\ud83e\uddf9"};function c(e){var t;const s=(null!==(t=e.labels)&&void 0!==t?t:[]).map(e=>String(e).toLowerCase()),n=e=>s.some(t=>t.includes(e));return n("feature")||n("enhancement")||"High"===e.priority?"Features":n("bug")||n("fix")||n("hotfix")?"Fixes":n("perf")||n("refactor")||n("ux")||n("docs")?"Improvements":"Chores"}var i=s(8424),d=s(7893);const u=()=>(new Date).toISOString().slice(0,10),m=e=>{const t=new Date;return t.setDate(t.getDate()-e),t.toISOString().slice(0,10)},x=e=>(e||"release-notes").replace(/[^\w.-]+/g,"_"),p=()=>{const[e,t]=(0,n.useState)(()=>i.IG.get(i.lR,"projects",[])),[s,p]=(0,n.useState)(()=>i.IG.get(i.lR,"tasks",[])),[h,g]=(0,n.useState)(()=>i.IG.get(i.np,"releases",[])),[v,f]=(0,n.useState)(()=>i.IG.get(i.np,"selectedProjectId","")),[b,j]=(0,n.useState)(m(14)),[w,y]=(0,n.useState)(u()),[N,C]=(0,n.useState)("type"),[k,S]=(0,n.useState)([]),[I,D]=(0,n.useState)(""),[G,P]=(0,n.useState)("v0.1.0"),[L,F]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!v)return;const e=h.filter(e=>e.projectId===v);if(e.length>0){var t,n;const a=e[e.length-1],r=(a.tasks||[]).map(e=>s.find(t=>t.id===e)).filter(Boolean).some(e=>"Features"===c(e));P(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=(null!==e&&void 0!==e?e:"").replace(/^v/i,"").trim().split(".").map(e=>Number.parseInt(e,10));let[n,a,r]=[0,0,0];return 3===s.length&&s.every(Number.isFinite)&&([n,a,r]=s),t?(a+=1,r=0):r+=1,"v".concat(n,".").concat(a,".").concat(r)}(a.version,r)),j((null===(t=a.range)||void 0===t||null===(n=t.to)||void 0===n?void 0:n.slice(0,10))||m(14))}else P("v0.1.0"),j(m(14));y(u())},[v]),(0,n.useEffect)(()=>{const e=e=>{if(e&&e.storageArea===localStorage){if(e.key==="".concat(i.lR,":projects"))try{t(JSON.parse(e.newValue||"[]"))}catch(s){t([])}if(e.key==="".concat(i.lR,":tasks"))try{p(JSON.parse(e.newValue||"[]"))}catch(n){p([])}if(e.key==="".concat(i.np,":releases"))try{g(JSON.parse(e.newValue||"[]"))}catch(a){g([])}e.key==="".concat(i.np,":selectedProjectId")&&f(e.newValue||"")}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,n.useEffect)(()=>{i.IG.set(i.np,"releases",h)},[h]),(0,n.useEffect)(()=>{v?i.IG.set(i.np,"selectedProjectId",v):i.IG.remove(i.np,"selectedProjectId")},[v]);const R=(0,n.useMemo)(()=>v?s.filter(e=>e.project===v):[],[s,v]),E=(0,n.useMemo)(()=>{if(!b||!w)return[];const e=new Date("".concat(b,"T00:00:00")),t=new Date("".concat(w,"T23:59:59"));return R.filter(s=>{if("done"!==s.status)return!1;if(!s.completedAt)return!1;const n=new Date(s.completedAt);return n>=e&&n<=t})},[R,b,w]);(0,n.useEffect)(()=>{const e=()=>F(e=>!e);return window.addEventListener("app:toggleSidebar",e),()=>window.removeEventListener("app:toggleSidebar",e)},[]);const A=(0,n.useCallback)(()=>{S(E);const e=function(e){let{version:t,date:s,tasks:n,groupBy:a="type",emoji:r=o}=e;const l=new Map,i=(e,t)=>{var s;return l.set(e,[...null!==(s=l.get(e))&&void 0!==s?s:[],t])};for(const o of n){var d,u;i("label"===a?null!==(d=null===(u=o.labels)||void 0===u?void 0:u[0])&&void 0!==d?d:"Other":c(o),o)}return"## ".concat(function(e){const t=(e||"").trim();return/^v/i.test(t)?t:"v".concat(t)}(t)," \u2014 ").concat(s,"\n")+[...l.entries()].sort((e,t)=>{let[s]=e,[n]=t;return s.localeCompare(n)}).map(e=>{var t,s;let[n,a]=e;const l=null!==(t=null!==(s=r[n])&&void 0!==s?s:r[n])&&void 0!==t?t:"\u2022",o=a.slice().sort((e,t)=>{var s,n;return(null!==(s=e.title)&&void 0!==s?s:"").localeCompare(null!==(n=t.title)&&void 0!==n?n:"")}).map(e=>{const t=null!=e.id?" (".concat(String(e.id).replace(/^task-/,"#"),")"):"";return"- ".concat(l," ").concat(e.title||"(untitled)").concat(t)}).join("\n");return"\n### ".concat(n,"\n").concat(o,"\n")}).join("\n")+"\n"}({version:G,date:u(),tasks:E,groupBy:N});D(e)},[E,G,N]),M=(0,n.useCallback)(async()=>{try{await navigator.clipboard.writeText(I||"")}catch(e){console.warn("Clipboard failed, falling back to download",e);const t=new Blob([I||""],{type:"text/markdown;charset=utf-8"}),s=URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download="".concat(x(G),".md"),n.click(),URL.revokeObjectURL(s)}},[I,G]),O=(0,n.useCallback)(()=>{const e=new Blob([I||""],{type:"text/markdown;charset=utf-8"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="".concat(x(G),".md"),s.click(),URL.revokeObjectURL(t)},[I,G]),B=(0,n.useCallback)(()=>{if(!v)return;const e={id:"".concat(Date.now()),projectId:v,version:G||"v0.0.0",date:(new Date).toISOString(),range:{from:b,to:w},filters:{},grouping:N,notesMd:I||"",tasks:k.map(e=>e.id)};g(t=>[...t,e])},[v,G,b,w,N,I,k]),U=(0,n.useCallback)(e=>{var t,s,n,a;f(e.projectId),P(e.version),j((null===(t=e.range)||void 0===t||null===(s=t.from)||void 0===s?void 0:s.slice(0,10))||m(14)),y((null===(n=e.range)||void 0===n||null===(a=n.to)||void 0===a?void 0:a.slice(0,10))||u()),D(e.notesMd||"")},[]);return(0,a.jsx)("div",{className:"h-screen w-full flex flex-col bg-gray-50",children:(0,a.jsx)("div",{className:"flex-1 min-h-0 w-full",children:(0,a.jsxs)("div",{className:"relative h-full w-full flex overflow-hidden",children:[(0,a.jsx)("div",{onClick:()=>F(!1),className:"lg:hidden fixed inset-0 z-20 bg-black/40 transition-opacity duration-300 ".concat(L?"opacity-100":"opacity-0 pointer-events-none")}),(0,a.jsx)("aside",{className:"\n              fixed lg:static inset-y-0 left-0 z-30 w-72 bg-gray-900 text-white\n              transform transition-transform duration-300 ease-in-out\n              border-r border-gray-800 overflow-y-auto shrink-0\n              ".concat(L?"translate-x-0":"-translate-x-full","\n              lg:translate-x-0 lg:transform-none\n            "),children:(0,a.jsx)(r,{projects:e,selectedProjectId:v,onSelectProject:f,fromDate:b,toDate:w,onChangeFrom:j,onChangeTo:y,grouping:N,onChangeGrouping:C,onGenerate:A,releases:h.filter(e=>e.projectId===v),onLoadRelease:U})}),v?(0,a.jsx)("main",{className:"flex-1 min-w-0 h-full overflow-auto",children:(0,a.jsx)(l,{version:G,setVersion:P,notesMd:I,setNotesMd:D,onCopy:M,onDownload:O,onSave:B})}):(0,a.jsx)(d.pp,{title:"Create your first release",description:(0,a.jsxs)(a.Fragment,{children:["Use the ",(0,a.jsx)("span",{className:"font-medium",children:"Project"})," picker on the left to choose a project. Then set a date range and click"," ",(0,a.jsx)("span",{className:"font-medium",children:"Generate"}),". We\u2019ll create editable Markdown and show a live preview here."]}),bullets:[(0,a.jsx)(a.Fragment,{children:"Group items by Feature / Fix / Chore, etc."}),(0,a.jsxs)(a.Fragment,{children:["Edit Markdown, copy it, or download as ",(0,a.jsx)("code",{children:".md"}),"."]}),(0,a.jsx)(a.Fragment,{children:"Click \u201cSave Release\u201d to store it locally for later."})]})]})})})};function h(){return(0,a.jsx)(p,{})}},5107:(e,t,s)=>{s.d(t,{A:()=>a});s(5043);var n=s(579);const a=e=>{let{children:t,onClick:s,type:a="button",className:r="",title:l,disabled:o}=e;return(0,n.jsx)("button",{type:a,title:l,disabled:o,onClick:s,className:["inline-flex items-center gap-1 rounded border px-3 py-1.5 text-sm","bg-white hover:bg-gray-50 text-gray-700","disabled:opacity-60 disabled:cursor-not-allowed",r].join(" "),children:t})}},6041:(e,t,s)=>{s.d(t,{A:()=>a});s(5043);var n=s(579);const a=e=>{let{isOpen:t,onClose:s,title:a,children:r,className:l="bg-white rounded-xl shadow-lg p-6",closeOnBackdrop:o=!0}=e;return t?(0,n.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:o?s:void 0}),(0,n.jsx)("div",{className:"absolute left-1/2 top-20 -translate-x-1/2 w-full max-w-lg",children:(0,n.jsxs)("div",{className:"relative bg-white rounded-xl shadow-lg max-h-[90vh] md:max-h-[80vh] overflow-y-auto ".concat(l),role:"dialog","aria-modal":!0,children:[a&&(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold",children:a}),(0,n.jsx)("button",{"aria-label":"Close modal",onClick:s,className:"rounded p-1 hover:bg-gray-100",children:"\u2715"})]}),r]})})]}):null}},7002:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(9930);function a(){const e=(0,n.vw)();if(!e)throw new Error("useProjectHub must be used within ProjectHubProvider");return e}},7893:(e,t,s)=>{s.d(t,{pp:()=>r,aF:()=>n.A});var n=s(6041),a=(s(5107),s(4024),s(9453),s(5043),s(7002),s(579));s(3198),s(1497);const r=e=>{let{title:t,description:s,bullets:n,action:r,className:l="rounded-xl border bg-white p-8"}=e;return(0,a.jsxs)("div",{className:l,children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-900",children:t}),s&&(0,a.jsx)("div",{className:"mt-2 text-gray-600 text-sm",children:s}),null!==n&&void 0!==n&&n.length?(0,a.jsx)("ul",{className:"mt-3 list-disc pl-5 space-y-1 text-sm text-gray-700",children:n.map((e,t)=>(0,a.jsx)("li",{children:e},t))}):null,r&&(0,a.jsx)("div",{className:"mt-4",children:r})]})}},9453:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(5043),a=s(579);const r=e=>{let{value:t,className:s}=e;const[r,l]=(0,n.useState)(!1);return(0,a.jsxs)("div",{className:["inline-flex items-center gap-2",s].join(" "),children:[(0,a.jsx)("code",{className:"rounded bg-gray-100 px-2 py-1",children:r?t:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,a.jsx)("button",{type:"button",onClick:()=>l(e=>!e),className:"text-xs rounded border px-2 py-1 hover:bg-gray-50",children:r?"Hide":"Show"})]})}},9930:(e,t,s)=>{s.d(t,{Yt:()=>m,vw:()=>u});var n=s(9379),a=s(5043),r=s(8424),l=s(579);const o="projects",c="selectedProjectId";function i(e){r.IG.set(r.Cx,o,e)}const d=(0,a.createContext)(void 0),u=()=>(0,a.useContext)(d);function m(e){let{children:t}=e;const[s,u]=(0,a.useState)([]),[m,x]=(0,a.useState)(null),p=()=>u(r.IG.get(r.Cx,o,[]));(0,a.useEffect)(()=>{p(),x(r.IG.get(r.Cx,c,null))},[]),(0,a.useEffect)(()=>{m?r.IG.set(r.Cx,c,m):r.IG.remove(r.Cx,c)},[m]);const h=(0,a.useMemo)(()=>s.find(e=>e.id===m)||null,[s,m]),g={projects:s,selected:h,selectedId:m,setSelectedId:x,selectProject:e=>x(e),addProject:e=>{const t=(e||"").trim();if(!t)return null;if(s.some(e=>e.name.toLowerCase()===t.toLowerCase()))return null;const n="".concat(t.toLowerCase().replace(/\s+/g,"-"),"-").concat(Date.now()),a={id:n,name:t,sections:{}},r=[...s,a];return u(r),i(r),x(n),a},deleteProject:e=>{const t=s.filter(t=>t.id!==e);u(t),i(t),m===e&&x(null)},updateSection:(e,t)=>{if(!m)return;const a=s.map(s=>s.id!==m?s:(0,n.A)((0,n.A)({},s),{},{sections:(0,n.A)((0,n.A)({},s.sections||{}),{},{[e]:t})}));u(a),i(a)},refresh:p};return(0,l.jsx)(d.Provider,{value:g,children:t})}}}]);
//# sourceMappingURL=380.5d026d4c.chunk.js.map